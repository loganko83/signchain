import{j as e}from"./ui-vendor-DTWk086U.js";import{r as b,g as Hs,f as Bs}from"./react-vendor-Dzt9N-8P.js";import{h as ge,C as g,a as N,B as c,I as ne,i as D,c as T,d as E,S as qe,F as Le,e as we,A as We,f as Xe,K as Ks,m as Qs,X as bs,l as Gs,n as Ws}from"./index-D9b3yhHA.js";import{T as He,P as Ze,S as ke}from"./switch-B_RwX5on.js";import{B as L}from"./badge-CoQQzBXl.js";import{T as $e,a as Ue,b as Y,c as G}from"./tabs-DZACaIWq.js";import{P as Ss}from"./progress-5QTQys0U.js";import{u as fs}from"./use-toast-miDmc8M5.js";import{f as Ge,S as Je,D as hs,a as os,b as ms,c as xs,w as us,x as js}from"./format-DIkXVFCV.js";import{S as As}from"./separator-BZZ8lkGp.js";import{S as Ms,C as Xs,B as Ls}from"./scroll-area-DJy5Pzth.js";import{P as ws,S as Zs,L as Js}from"./square-Ae8JgTGc.js";import{C as ks}from"./calendar-e8RMu8l9.js";import{C as Fe}from"./clock-DoIFtoYA.js";import{E as Oe,C as Ys}from"./eye-CE0rzfXF.js";import{D as is,T as _s}from"./trash-2-DVESjd3Q.js";import{M as Ve}from"./mail-D5eabD3E.js";import{E as qs}from"./external-link-ol-h-Xja.js";import{C as ea}from"./checkbox-CHlD14fY.js";import{S as sa,D as aa}from"./save-vtbuKhLN.js";import{C as $s}from"./copy-CkXYGT0O.js";import{U as Cs}from"./user-BcZ5kMLf.js";import{S as Ne,a as ve,b as ye,c as be,d as B}from"./select-DfnipONU.js";import{T as ls,a as ns,b as Ce,c as ie,d as rs,e as Q,A as ta}from"./table-C-Y88MWl.js";import{U as ps}from"./users-Xd4BgNGA.js";import{U as ze}from"./upload-DL1BUy_T.js";import{C as Ye}from"./circle-alert-BWdx3C3e.js";import{C as De}from"./circle-check-big-DbhMhWE9.js";import{S as Be}from"./settings-DA7CZ9AR.js";import{E as ia,C as la,Q as Ns}from"./qr-code-BeMArEA2.js";import{S as Ie}from"./smartphone-BT3XQZ31.js";import{F as na}from"./fingerprint-D2a2BAvy.js";import{Z as ra}from"./zap-BbzD2tJz.js";import{R as vs,G as ca}from"./refresh-cw-xEXsHXZS.js";import{C as Us}from"./check-DIdrKjIp.js";import{H as Rs}from"./hash-ylfpBXIW.js";import{F as Ds}from"./file-pen-line-zdzQZwrf.js";import"./api-CuCeq-4F.js";import"./utils-B2rm_Apj.js";import"./index-DPahxWVS.js";import"./index-CafewVXS.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],ha=ge("building-2",da);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],zs=ge("building",oa);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]],xa=ge("chart-no-axes-column-increasing",ma);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M9 10h6",key:"9gxzsh"}],["path",{d:"M12 13V7",key:"h0r20n"}],["path",{d:"M9 17h6",key:"r8uit2"}]],ja=ge("file-diff",ua);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],ys=ge("git-branch",pa);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]],ga=ge("git-merge",fa);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],ts=ge("history",Na);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],cs=ge("info",va);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],ds=ge("message-square",ya);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],Fs=ge("monitor",ba);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Sa=ge("pen",wa);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Is=ge("rotate-ccw",ka);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ca=ge("shield-check",_a);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=[["path",{d:"M14 13V8.5C14 7 15 7 15 5a3 3 0 0 0-6 0c0 2 1 2 1 3.5V13",key:"i9gjdv"}],["path",{d:"M20 15.5a2.5 2.5 0 0 0-2.5-2.5h-11A2.5 2.5 0 0 0 4 15.5V17a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1z",key:"1vzg3v"}],["path",{d:"M5 22h14",key:"ehvnwv"}]],as=ge("stamp",Ta);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]],Os=ge("tablet",Ea);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Ps=ge("type",Aa);function Ma({documentUrl:f,onSave:A}){const[M,y]=b.useState([{id:"1",email:"",name:"",role:"서명자 1",color:"#3B82F6",fields:[]}]),[K,$]=b.useState("1"),[o,k]=b.useState("signature"),[F,m]=b.useState([]),[d,n]=b.useState(1),[S]=b.useState(3),I=b.useRef(null),ee=[{id:"signature",label:"서명",icon:ws},{id:"initial",label:"이니셜",icon:Ps},{id:"stamp",label:"도장",icon:as},{id:"date",label:"날짜",icon:ks},{id:"text",label:"텍스트",icon:Ps},{id:"checkbox",label:"체크박스",icon:Zs}],i=()=>{const h={id:Date.now().toString(),email:"",name:"",role:`서명자 ${M.length+1}`,color:`#${Math.floor(Math.random()*16777215).toString(16)}`,fields:[]};y([...M,h])},t=(h,j)=>{y(M.map(p=>p.id===h?{...p,...j}:p))},_=h=>{M.length>1&&(y(M.filter(j=>j.id!==h)),m(F.filter(j=>j.assignedTo!==h)))},R=h=>{if(!I.current||!K)return;const j=I.current.getBoundingClientRect(),p=(h.clientX-j.left)/j.width*100,s=(h.clientY-j.top)/j.height*100,a={id:Date.now().toString(),type:o,x:p,y:s,width:15,height:5,page:d,assignedTo:K,required:!0,label:`${o} 필드`};m([...F,a])},O=h=>{m(F.filter(j=>j.id!==h))},x=()=>{const h=M.map(j=>({...j,fields:F.filter(p=>p.assignedTo===j.id)}));A(h,F)};return e.jsxs("div",{className:"grid grid-cols-12 gap-4 h-[calc(100vh-12rem)]",children:[e.jsxs("div",{className:"col-span-3 space-y-4",children:[e.jsx(g,{children:e.jsxs(N,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"서명자 관리"}),e.jsx(Ms,{className:"h-[400px]",children:e.jsx("div",{className:"space-y-3",children:M.map((h,j)=>e.jsxs("div",{className:`p-3 rounded-lg border-2 cursor-pointer transition-colors ${K===h.id?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,onClick:()=>$(h.id),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:h.color}}),e.jsx("span",{className:"font-medium text-sm",children:h.role})]}),M.length>1&&e.jsx(c,{size:"sm",variant:"ghost",onClick:p=>{p.stopPropagation(),_(h.id)},children:"×"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ne,{placeholder:"이메일",value:h.email,onChange:p=>t(h.id,{email:p.target.value}),onClick:p=>p.stopPropagation()}),e.jsx(ne,{placeholder:"이름",value:h.name,onChange:p=>t(h.id,{name:p.target.value}),onClick:p=>p.stopPropagation()})]}),e.jsx("div",{className:"mt-2",children:e.jsxs(L,{variant:"outline",className:"text-xs",children:[F.filter(p=>p.assignedTo===h.id).length,"개 필드"]})})]},h.id))})}),e.jsx(c,{className:"w-full mt-3",variant:"outline",onClick:i,children:"서명자 추가"})]})}),e.jsx(g,{children:e.jsxs(N,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"서명 도구"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:ee.map(h=>e.jsxs(c,{variant:o===h.id?"default":"outline",size:"sm",onClick:()=>k(h.id),className:"flex flex-col gap-1 h-auto py-2",children:[e.jsx(h.icon,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:h.label})]},h.id))})]})})]}),e.jsx("div",{className:"col-span-6",children:e.jsx(g,{className:"h-full",children:e.jsxs(N,{className:"p-4 h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-semibold",children:"문서 미리보기"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{size:"sm",variant:"outline",disabled:d===1,onClick:()=>n(d-1),children:"이전"}),e.jsxs("span",{className:"text-sm px-3",children:[d," / ",S]}),e.jsx(c,{size:"sm",variant:"outline",disabled:d===S,onClick:()=>n(d+1),children:"다음"})]})]}),e.jsxs("div",{ref:I,className:"flex-1 bg-gray-100 rounded-lg relative overflow-hidden cursor-crosshair",onClick:R,style:{backgroundImage:`url(${f})`,backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white w-[90%] h-[95%] shadow-lg p-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"계약서 샘플"}),e.jsxs("div",{className:"space-y-4 text-gray-600",children:[e.jsx("p",{children:'계약 당사자: _________________ (이하 "갑")'}),e.jsx("p",{children:'계약 상대방: _________________ (이하 "을")'}),e.jsx("p",{children:"계약 일자: _________________"}),e.jsxs("div",{className:"mt-8",children:[e.jsx("p",{className:"font-semibold",children:"제1조 (목적)"}),e.jsx("p",{children:"본 계약은 갑과 을 사이의 ..."})]})]})]})}),F.filter(h=>h.page===d).map(h=>{const j=M.find(p=>p.id===h.assignedTo);return e.jsx("div",{className:"absolute border-2 rounded cursor-move hover:shadow-lg transition-shadow",style:{left:`${h.x}%`,top:`${h.y}%`,width:`${h.width}%`,height:`${h.height}%`,borderColor:(j==null?void 0:j.color)||"#ccc",backgroundColor:`${j==null?void 0:j.color}20`||"#ccc20"},onClick:p=>{p.stopPropagation(),O(h.id)},children:e.jsx("div",{className:"text-xs p-1 text-center",children:h.label})},h.id)})]})]})})}),e.jsxs("div",{className:"col-span-3 space-y-4",children:[e.jsx(g,{children:e.jsxs(N,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"필드 속성"}),e.jsx(Ms,{className:"h-[300px]",children:e.jsx("div",{className:"space-y-3",children:F.map(h=>{const j=M.find(p=>p.id===h.assignedTo);return e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(L,{style:{backgroundColor:j==null?void 0:j.color},className:"text-white",children:j==null?void 0:j.role}),e.jsx(c,{size:"sm",variant:"ghost",onClick:()=>O(h.id),children:"삭제"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ne,{placeholder:"필드 라벨",value:h.label,onChange:p=>{m(F.map(s=>s.id===h.id?{...s,label:p.target.value}:s))}}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:h.required,onChange:p=>{m(F.map(s=>s.id===h.id?{...s,required:p.target.checked}:s))}}),e.jsx(D,{className:"text-sm",children:"필수 입력"})]})]})]},h.id)})})})]})}),e.jsx(g,{children:e.jsxs(N,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"서명 순서"}),e.jsx("div",{className:"space-y-2",children:M.map((h,j)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary text-white flex items-center justify-center text-sm",children:j+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-sm",children:h.role}),e.jsx("p",{className:"text-xs text-muted-foreground",children:h.email||"이메일 미입력"})]})]},h.id))})]})}),e.jsx("div",{className:"flex gap-2",children:e.jsx(c,{className:"flex-1",onClick:x,disabled:M.some(h=>!h.email)||F.length===0,children:"저장 및 다음"})})]})]})}function Ra({trackingData:f,onSendReminder:A,onDownload:M,onView:y}){const[K,$]=b.useState([]),o=d=>{switch(d){case"completed":return"bg-green-500";case"signing":return"bg-blue-500";case"viewed":return"bg-yellow-500";case"sent":return"bg-orange-500";case"declined":return"bg-red-500";case"expired":return"bg-gray-500";default:return"bg-gray-400"}},k=d=>{switch(d){case"draft":return"초안";case"sent":return"발송됨";case"viewed":return"열람됨";case"signing":return"서명 중";case"completed":return"완료";case"expired":return"만료됨";case"declined":return"거절됨";case"pending":return"대기중";case"signed":return"서명 완료";default:return d}},F=()=>f.signers.filter(n=>n.status==="signed").length/f.signers.length*100,m=d=>{$(n=>n.includes(d)?n.filter(S=>S!==d):[...n,d])};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(g,{children:[e.jsx(T,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(E,{children:f.title}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ks,{className:"w-4 h-4"}),"생성일: ",Ge(new Date(f.createdAt),"yyyy-MM-dd HH:mm")]}),f.expiresAt&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Fe,{className:"w-4 h-4"}),"만료일: ",Ge(new Date(f.expiresAt),"yyyy-MM-dd")]})]})]}),e.jsx(L,{className:`${o(f.status)} text-white`,children:k(f.status)})]})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"서명 진행률"}),e.jsxs("span",{className:"font-medium",children:[f.signers.filter(d=>d.status==="signed").length," / ",f.signers.length]})]}),e.jsx(Ss,{value:F(),className:"h-2"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(c,{size:"sm",variant:"outline",onClick:y,children:[e.jsx(Oe,{className:"w-4 h-4 mr-2"}),"문서 보기"]}),f.status==="completed"&&e.jsxs(c,{size:"sm",onClick:M,children:[e.jsx(is,{className:"w-4 h-4 mr-2"}),"최종본 다운로드"]}),e.jsxs(c,{size:"sm",variant:"outline",onClick:()=>A(K),disabled:K.length===0,children:[e.jsx(Ve,{className:"w-4 h-4 mr-2"}),"리마인더 발송 (",K.length,")"]})]})]})]}),e.jsxs(g,{children:[e.jsx(T,{children:e.jsx(E,{className:"text-lg",children:"서명자 현황"})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-3",children:f.signers.map(d=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",checked:K.includes(d.id),onChange:()=>m(d.id),disabled:d.status==="signed",className:"mt-1"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[d.status==="signed"?e.jsx(Ys,{className:"w-5 h-5 text-green-500"}):e.jsx(Xs,{className:"w-5 h-5 text-gray-400"}),e.jsx("span",{className:"font-medium",children:d.name||d.email}),e.jsx(L,{variant:"outline",className:"text-xs",children:d.role})]}),e.jsxs("div",{className:"mt-1 space-y-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:d.email}),d.viewedAt&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["열람: ",Ge(new Date(d.viewedAt),"yyyy-MM-dd HH:mm")]}),d.signedAt&&e.jsxs("p",{className:"text-xs text-green-600",children:["서명: ",Ge(new Date(d.signedAt),"yyyy-MM-dd HH:mm")]}),d.ipAddress&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["IP: ",d.ipAddress," ",d.device&&`• ${d.device}`]})]})]})]}),e.jsx(L,{variant:d.status==="signed"?"default":"secondary",children:k(d.status)})]})},d.id))})})]}),e.jsxs(g,{children:[e.jsx(T,{children:e.jsx(E,{className:"text-lg",children:"활동 기록"})}),e.jsx(N,{children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-2 top-0 bottom-0 w-0.5 bg-border"}),e.jsx("div",{className:"space-y-4",children:f.timeline.map((d,n)=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"relative",children:e.jsx("div",{className:"w-4 h-4 rounded-full bg-background border-2 border-primary"})}),e.jsxs("div",{className:"flex-1 pb-4",children:[e.jsx("p",{className:"font-medium text-sm",children:d.action}),e.jsx("p",{className:"text-sm text-muted-foreground",children:d.actor}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[Ge(new Date(d.timestamp),"yyyy-MM-dd HH:mm:ss"),d.ipAddress&&` • IP: ${d.ipAddress}`]}),d.details&&e.jsx("p",{className:"text-sm mt-1",children:d.details})]})]},d.id))})]})})]}),f.blockchainTxHash&&e.jsxs(g,{children:[e.jsx(T,{children:e.jsxs(E,{className:"text-lg flex items-center gap-2",children:[e.jsx(qe,{className:"w-5 h-5"}),"블록체인 정보"]})}),e.jsxs(N,{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"문서 해시"}),e.jsx("p",{className:"font-mono text-xs mt-1",children:f.documentHash})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"트랜잭션 해시"}),e.jsx("p",{className:"font-mono text-xs mt-1",children:f.blockchainTxHash})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(c,{size:"sm",variant:"outline",children:[e.jsx(qs,{className:"w-4 h-4 mr-2"}),"익스플로러에서 보기"]}),e.jsxs(c,{size:"sm",variant:"outline",children:[e.jsx(qe,{className:"w-4 h-4 mr-2"}),"검증하기"]})]})]})]}),f.reminders.length>0&&e.jsxs(g,{children:[e.jsx(T,{children:e.jsx(E,{className:"text-lg",children:"리마인더 발송 기록"})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-2",children:f.reminders.map((d,n)=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{children:d.sentTo.join(", ")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:Ge(new Date(d.sentAt),"yyyy-MM-dd HH:mm")})]}),e.jsx(L,{variant:"outline",children:d.type==="auto"?"자동":"수동"})]},n))})})]})]})}const Da=[{id:"1",name:"표준 근로계약서",category:"인사/노무",description:"정규직 근로자를 위한 표준 근로계약서 템플릿",tags:["근로계약","정규직","노동법"],fields:[{id:"1",label:"근로자 성명",type:"text",required:!0},{id:"2",label:"주민등록번호",type:"text",required:!0},{id:"3",label:"주소",type:"text",required:!0},{id:"4",label:"직위",type:"text",required:!0},{id:"5",label:"근무부서",type:"text",required:!0},{id:"6",label:"월급여",type:"number",required:!0},{id:"7",label:"계약시작일",type:"date",required:!0},{id:"8",label:"계약종료일",type:"date",required:!1}],content:`근로계약서

사업주(이하 "갑"이라 함)와 근로자 {{근로자 성명}}(이하 "을"이라 함)은 다음과 같이 근로계약을 체결한다.

제1조 (근로계약기간)
계약기간은 {{계약시작일}}부터 {{계약종료일}}까지로 한다.

제2조 (근무장소 및 업무내용)
1. 근무장소: {{근무부서}}
2. 업무내용: {{직위}}의 업무

제3조 (근로시간)
1. 근로시간은 휴게시간을 제외하고 1일 8시간, 1주 40시간으로 한다.
2. 근무시간: 09:00 ~ 18:00 (휴게시간 12:00 ~ 13:00)

제4조 (임금)
1. 월 기본급: {{월급여}}원
2. 지급일: 매월 25일
3. 지급방법: 을이 지정한 은행계좌로 입금

...`},{id:"2",name:"소프트웨어 개발 용역계약서",category:"IT/개발",description:"소프트웨어 개발 프로젝트를 위한 용역계약서",tags:["개발","용역","IT","프로젝트"],fields:[{id:"1",label:"프로젝트명",type:"text",required:!0},{id:"2",label:"개발범위",type:"textarea",required:!0},{id:"3",label:"계약금액",type:"number",required:!0},{id:"4",label:"개발기간",type:"text",required:!0},{id:"5",label:"납품일자",type:"date",required:!0}],content:"소프트웨어 개발 용역계약서..."},{id:"3",name:"비밀유지계약서(NDA)",category:"법무/보안",description:"기업 간 비밀정보 보호를 위한 NDA 템플릿",tags:["NDA","비밀유지","보안"],fields:[{id:"1",label:"공개당사자",type:"text",required:!0},{id:"2",label:"수령당사자",type:"text",required:!0},{id:"3",label:"비밀정보 내용",type:"textarea",required:!0},{id:"4",label:"유효기간",type:"text",required:!0}],content:"비밀유지계약서(NDA)..."}];function za(){const[f,A]=b.useState(Da),[M,y]=b.useState(null),[K,$]=b.useState(!1),[o,k]=b.useState(null),F=[{id:"hr",label:"인사/노무",icon:Cs},{id:"it",label:"IT/개발",icon:Le},{id:"legal",label:"법무/보안",icon:zs},{id:"sales",label:"영업/판매",icon:aa},{id:"rental",label:"임대/부동산",icon:zs}],m=()=>{const i={id:Date.now().toString(),name:"새 템플릿",category:"기타",description:"",fields:[],content:"",tags:[]};k(i),$(!0)},d=()=>{if(!o)return;const i={id:Date.now().toString(),label:"",type:"text",required:!1};k({...o,fields:[...o.fields,i]})},n=(i,t)=>{o&&k({...o,fields:o.fields.map(_=>_.id===i?{..._,...t}:_)})},S=i=>{o&&k({...o,fields:o.fields.filter(t=>t.id!==i)})},I=()=>{o&&(A(K?[...f,o]:f.map(i=>i.id===o.id?o:i)),k(null),$(!1))},ee=i=>{const t={...i,id:Date.now().toString(),name:`${i.name} (복사본)`};A([...f,t])};return o?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:K?"템플릿 만들기":"템플릿 편집"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{variant:"outline",onClick:()=>{k(null),$(!1)},children:"취소"}),e.jsxs(c,{onClick:I,children:[e.jsx(sa,{className:"w-4 h-4 mr-2"}),"저장"]})]})]}),e.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[e.jsxs("div",{className:"col-span-5 space-y-4",children:[e.jsxs(g,{children:[e.jsx(T,{children:e.jsx(E,{children:"기본 정보"})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(D,{children:"템플릿 이름"}),e.jsx(ne,{value:o.name,onChange:i=>k({...o,name:i.target.value})})]}),e.jsxs("div",{children:[e.jsx(D,{children:"카테고리"}),e.jsx("select",{className:"w-full border rounded-md p-2",value:o.category,onChange:i=>k({...o,category:i.target.value}),children:F.map(i=>e.jsx("option",{value:i.label,children:i.label},i.id))})]}),e.jsxs("div",{children:[e.jsx(D,{children:"설명"}),e.jsx(He,{value:o.description,onChange:i=>k({...o,description:i.target.value})})]}),e.jsxs("div",{children:[e.jsx(D,{children:"태그 (쉼표로 구분)"}),e.jsx(ne,{value:o.tags.join(", "),onChange:i=>k({...o,tags:i.target.value.split(",").map(t=>t.trim()).filter(t=>t)})})]})]})]}),e.jsxs(g,{children:[e.jsx(T,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(E,{children:"입력 필드"}),e.jsx(c,{size:"sm",onClick:d,children:e.jsx(Ze,{className:"w-4 h-4"})})]})}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-3",children:[o.fields.map(i=>e.jsxs("div",{className:"border rounded-lg p-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ne,{placeholder:"필드 라벨",value:i.label,onChange:t=>n(i.id,{label:t.target.value})}),e.jsx(c,{size:"sm",variant:"ghost",onClick:()=>S(i.id),children:e.jsx(_s,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{className:"flex-1 border rounded-md p-1 text-sm",value:i.type,onChange:t=>n(i.id,{type:t.target.value}),children:[e.jsx("option",{value:"text",children:"텍스트"}),e.jsx("option",{value:"number",children:"숫자"}),e.jsx("option",{value:"date",children:"날짜"}),e.jsx("option",{value:"textarea",children:"긴 텍스트"}),e.jsx("option",{value:"select",children:"선택"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ea,{checked:i.required,onCheckedChange:t=>n(i.id,{required:!!t})}),e.jsx(D,{className:"text-sm",children:"필수"})]})]}),e.jsx(ne,{placeholder:"플레이스홀더",value:i.placeholder||"",onChange:t=>n(i.id,{placeholder:t.target.value}),className:"text-sm"})]},i.id)),o.fields.length===0&&e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"필드를 추가하세요"})]})})]})]}),e.jsx("div",{className:"col-span-7",children:e.jsxs(g,{className:"h-full",children:[e.jsxs(T,{children:[e.jsx(E,{children:"템플릿 내용"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"필드를 참조하려면 {{필드라벨}} 형식을 사용하세요"})]}),e.jsx(N,{children:e.jsx(He,{className:"min-h-[600px] font-mono text-sm",value:o.content,onChange:i=>k({...o,content:i.target.value}),placeholder:"계약서 내용을 입력하세요..."})})]})})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"계약서 템플릿"}),e.jsxs(c,{onClick:m,children:[e.jsx(Ze,{className:"w-4 h-4 mr-2"}),"새 템플릿 만들기"]})]}),e.jsx("div",{className:"grid gap-4",children:f.map(i=>e.jsxs(g,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(T,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx(E,{className:"text-lg",children:i.name}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:i.description})]}),e.jsx(L,{variant:"outline",children:i.category})]})}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(Js,{className:"w-4 h-4"}),e.jsxs("span",{children:[i.fields.length,"개 입력 필드"]})]}),i.tags.length>0&&e.jsx("div",{className:"flex gap-2 flex-wrap",children:i.tags.map((t,_)=>e.jsx(L,{variant:"secondary",children:t},_))}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(c,{size:"sm",onClick:()=>y(i),children:"사용하기"}),e.jsx(c,{size:"sm",variant:"outline",onClick:()=>k(i),children:"편집"}),e.jsx(c,{size:"sm",variant:"outline",onClick:()=>ee(i),children:e.jsx($s,{className:"w-4 h-4"})})]})]})})]},i.id))})]})}var Vs={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(f,A){((M,y)=>{f.exports=y()})(Bs,function M(){var y=typeof self<"u"?self:typeof window<"u"?window:y!==void 0?y:{},K,$=!y.document&&!!y.postMessage,o=y.IS_PAPA_WORKER||!1,k={},F=0,m={};function d(s){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(a){var r=h(a);r.chunkSize=parseInt(r.chunkSize),a.step||a.chunk||(r.chunkSize=null),this._handle=new i(r),(this._handle.streamer=this)._config=r}).call(this,s),this.parseChunk=function(a,r){var v=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<v){let l=this._config.newline;l||(u=this._config.quoteChar||'"',l=this._handle.guessLineEndings(a,u)),a=[...a.split(l).slice(v)].join(l)}this.isFirstChunk&&p(this._config.beforeFirstChunk)&&(u=this._config.beforeFirstChunk(a))!==void 0&&(a=u),this.isFirstChunk=!1,this._halted=!1;var v=this._partialLine+a,u=(this._partialLine="",this._handle.parse(v,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(a=u.meta.cursor,v=(this._finished||(this._partialLine=v.substring(a-this._baseIndex),this._baseIndex=a),u&&u.data&&(this._rowCount+=u.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),o)y.postMessage({results:u,workerId:m.WORKER_ID,finished:v});else if(p(this._config.chunk)&&!r){if(this._config.chunk(u,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=u=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(u.data),this._completeResults.errors=this._completeResults.errors.concat(u.errors),this._completeResults.meta=u.meta),this._completed||!v||!p(this._config.complete)||u&&u.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),v||u&&u.meta.paused||this._nextChunk(),u}this._halted=!0},this._sendError=function(a){p(this._config.error)?this._config.error(a):o&&this._config.error&&y.postMessage({workerId:m.WORKER_ID,error:a,finished:!1})}}function n(s){var a;(s=s||{}).chunkSize||(s.chunkSize=m.RemoteChunkSize),d.call(this,s),this._nextChunk=$?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(r){this._input=r,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(a=new XMLHttpRequest,this._config.withCredentials&&(a.withCredentials=this._config.withCredentials),$||(a.onload=j(this._chunkLoaded,this),a.onerror=j(this._chunkError,this)),a.open(this._config.downloadRequestBody?"POST":"GET",this._input,!$),this._config.downloadRequestHeaders){var r,v=this._config.downloadRequestHeaders;for(r in v)a.setRequestHeader(r,v[r])}var u;this._config.chunkSize&&(u=this._start+this._config.chunkSize-1,a.setRequestHeader("Range","bytes="+this._start+"-"+u));try{a.send(this._config.downloadRequestBody)}catch(l){this._chunkError(l.message)}$&&a.status===0&&this._chunkError()}},this._chunkLoaded=function(){a.readyState===4&&(a.status<200||400<=a.status?this._chunkError():(this._start+=this._config.chunkSize||a.responseText.length,this._finished=!this._config.chunkSize||this._start>=(r=>(r=r.getResponseHeader("Content-Range"))!==null?parseInt(r.substring(r.lastIndexOf("/")+1)):-1)(a),this.parseChunk(a.responseText)))},this._chunkError=function(r){r=a.statusText||r,this._sendError(new Error(r))}}function S(s){(s=s||{}).chunkSize||(s.chunkSize=m.LocalChunkSize),d.call(this,s);var a,r,v=typeof FileReader<"u";this.stream=function(u){this._input=u,r=u.slice||u.webkitSlice||u.mozSlice,v?((a=new FileReader).onload=j(this._chunkLoaded,this),a.onerror=j(this._chunkError,this)):a=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var u=this._input,l=(this._config.chunkSize&&(l=Math.min(this._start+this._config.chunkSize,this._input.size),u=r.call(u,this._start,l)),a.readAsText(u,this._config.encoding));v||this._chunkLoaded({target:{result:l}})},this._chunkLoaded=function(u){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(u.target.result)},this._chunkError=function(){this._sendError(a.error)}}function I(s){var a;d.call(this,s=s||{}),this.stream=function(r){return a=r,this._nextChunk()},this._nextChunk=function(){var r,v;if(!this._finished)return r=this._config.chunkSize,a=r?(v=a.substring(0,r),a.substring(r)):(v=a,""),this._finished=!a,this.parseChunk(v)}}function ee(s){d.call(this,s=s||{});var a=[],r=!0,v=!1;this.pause=function(){d.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){d.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(u){this._input=u,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){v&&a.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),a.length?this.parseChunk(a.shift()):r=!0},this._streamData=j(function(u){try{a.push(typeof u=="string"?u:u.toString(this._config.encoding)),r&&(r=!1,this._checkIsFinished(),this.parseChunk(a.shift()))}catch(l){this._streamError(l)}},this),this._streamError=j(function(u){this._streamCleanUp(),this._sendError(u)},this),this._streamEnd=j(function(){this._streamCleanUp(),v=!0,this._streamData("")},this),this._streamCleanUp=j(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function i(s){var a,r,v,u,l=Math.pow(2,53),w=-l,U=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,pe=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,P=this,ae=0,z=0,ue=!1,V=!1,W=[],C={data:[],errors:[],meta:{}};function oe(Z){return s.skipEmptyLines==="greedy"?Z.join("").trim()==="":Z.length===1&&Z[0].length===0}function he(){if(C&&v&&(_e("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+m.DefaultDelimiter+"'"),v=!1),s.skipEmptyLines&&(C.data=C.data.filter(function(q){return!oe(q)})),je()){let q=function(de,me){p(s.transformHeader)&&(de=s.transformHeader(de,me)),W.push(de)};if(C)if(Array.isArray(C.data[0])){for(var Z=0;je()&&Z<C.data.length;Z++)C.data[Z].forEach(q);C.data.splice(0,1)}else C.data.forEach(q)}function se(q,de){for(var me=s.header?{}:[],te=0;te<q.length;te++){var le=te,J=q[te],J=((Te,H)=>(re=>(s.dynamicTypingFunction&&s.dynamicTyping[re]===void 0&&(s.dynamicTyping[re]=s.dynamicTypingFunction(re)),(s.dynamicTyping[re]||s.dynamicTyping)===!0))(Te)?H==="true"||H==="TRUE"||H!=="false"&&H!=="FALSE"&&((re=>{if(U.test(re)&&(re=parseFloat(re),w<re&&re<l))return 1})(H)?parseFloat(H):pe.test(H)?new Date(H):H===""?null:H):H)(le=s.header?te>=W.length?"__parsed_extra":W[te]:le,J=s.transform?s.transform(J,le):J);le==="__parsed_extra"?(me[le]=me[le]||[],me[le].push(J)):me[le]=J}return s.header&&(te>W.length?_e("FieldMismatch","TooManyFields","Too many fields: expected "+W.length+" fields but parsed "+te,z+de):te<W.length&&_e("FieldMismatch","TooFewFields","Too few fields: expected "+W.length+" fields but parsed "+te,z+de)),me}var ce;C&&(s.header||s.dynamicTyping||s.transform)&&(ce=1,!C.data.length||Array.isArray(C.data[0])?(C.data=C.data.map(se),ce=C.data.length):C.data=se(C.data,0),s.header&&C.meta&&(C.meta.fields=W),z+=ce)}function je(){return s.header&&W.length===0}function _e(Z,se,ce,q){Z={type:Z,code:se,message:ce},q!==void 0&&(Z.row=q),C.errors.push(Z)}p(s.step)&&(u=s.step,s.step=function(Z){C=Z,je()?he():(he(),C.data.length!==0&&(ae+=Z.data.length,s.preview&&ae>s.preview?r.abort():(C.data=C.data[0],u(C,P))))}),this.parse=function(Z,se,ce){var q=s.quoteChar||'"',q=(s.newline||(s.newline=this.guessLineEndings(Z,q)),v=!1,s.delimiter?p(s.delimiter)&&(s.delimiter=s.delimiter(Z),C.meta.delimiter=s.delimiter):((q=((de,me,te,le,J)=>{var Te,H,re,Pe;J=J||[",","	","|",";",m.RECORD_SEP,m.UNIT_SEP];for(var Ke=0;Ke<J.length;Ke++){for(var Ee,es=J[Ke],fe=0,Ae=0,xe=0,Se=(re=void 0,new _({comments:le,delimiter:es,newline:me,preview:10}).parse(de)),Re=0;Re<Se.data.length;Re++)te&&oe(Se.data[Re])?xe++:(Ee=Se.data[Re].length,Ae+=Ee,re===void 0?re=Ee:0<Ee&&(fe+=Math.abs(Ee-re),re=Ee));0<Se.data.length&&(Ae/=Se.data.length-xe),(H===void 0||fe<=H)&&(Pe===void 0||Pe<Ae)&&1.99<Ae&&(H=fe,Te=es,Pe=Ae)}return{successful:!!(s.delimiter=Te),bestDelimiter:Te}})(Z,s.newline,s.skipEmptyLines,s.comments,s.delimitersToGuess)).successful?s.delimiter=q.bestDelimiter:(v=!0,s.delimiter=m.DefaultDelimiter),C.meta.delimiter=s.delimiter),h(s));return s.preview&&s.header&&q.preview++,a=Z,r=new _(q),C=r.parse(a,se,ce),he(),ue?{meta:{paused:!0}}:C||{meta:{paused:!1}}},this.paused=function(){return ue},this.pause=function(){ue=!0,r.abort(),a=p(s.chunk)?"":a.substring(r.getCharIndex())},this.resume=function(){P.streamer._halted?(ue=!1,P.streamer.parseChunk(a,!0)):setTimeout(P.resume,3)},this.aborted=function(){return V},this.abort=function(){V=!0,r.abort(),C.meta.aborted=!0,p(s.complete)&&s.complete(C),a=""},this.guessLineEndings=function(de,q){de=de.substring(0,1048576);var q=new RegExp(t(q)+"([^]*?)"+t(q),"gm"),ce=(de=de.replace(q,"")).split("\r"),q=de.split(`
`),de=1<q.length&&q[0].length<ce[0].length;if(ce.length===1||de)return`
`;for(var me=0,te=0;te<ce.length;te++)ce[te][0]===`
`&&me++;return me>=ce.length/2?`\r
`:"\r"}}function t(s){return s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function _(s){var a=(s=s||{}).delimiter,r=s.newline,v=s.comments,u=s.step,l=s.preview,w=s.fastMode,U=null,pe=!1,P=s.quoteChar==null?'"':s.quoteChar,ae=P;if(s.escapeChar!==void 0&&(ae=s.escapeChar),(typeof a!="string"||-1<m.BAD_DELIMITERS.indexOf(a))&&(a=","),v===a)throw new Error("Comment character same as delimiter");v===!0?v="#":(typeof v!="string"||-1<m.BAD_DELIMITERS.indexOf(v))&&(v=!1),r!==`
`&&r!=="\r"&&r!==`\r
`&&(r=`
`);var z=0,ue=!1;this.parse=function(V,W,C){if(typeof V!="string")throw new Error("Input must be a string");var oe=V.length,he=a.length,je=r.length,_e=v.length,Z=p(u),se=[],ce=[],q=[],de=z=0;if(!V)return fe();if(w||w!==!1&&V.indexOf(P)===-1){for(var me=V.split(r),te=0;te<me.length;te++){if(q=me[te],z+=q.length,te!==me.length-1)z+=r.length;else if(C)return fe();if(!v||q.substring(0,_e)!==v){if(Z){if(se=[],Pe(q.split(a)),Ae(),ue)return fe()}else Pe(q.split(a));if(l&&l<=te)return se=se.slice(0,l),fe(!0)}}return fe()}for(var le=V.indexOf(a,z),J=V.indexOf(r,z),Te=new RegExp(t(ae)+t(P),"g"),H=V.indexOf(P,z);;)if(V[z]===P)for(H=z,z++;;){if((H=V.indexOf(P,H+1))===-1)return C||ce.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:se.length,index:z}),Ee();if(H===oe-1)return Ee(V.substring(z,H).replace(Te,P));if(P===ae&&V[H+1]===ae)H++;else if(P===ae||H===0||V[H-1]!==ae){le!==-1&&le<H+1&&(le=V.indexOf(a,H+1));var re=Ke((J=J!==-1&&J<H+1?V.indexOf(r,H+1):J)===-1?le:Math.min(le,J));if(V.substr(H+1+re,he)===a){q.push(V.substring(z,H).replace(Te,P)),V[z=H+1+re+he]!==P&&(H=V.indexOf(P,z)),le=V.indexOf(a,z),J=V.indexOf(r,z);break}if(re=Ke(J),V.substring(H+1+re,H+1+re+je)===r){if(q.push(V.substring(z,H).replace(Te,P)),es(H+1+re+je),le=V.indexOf(a,z),H=V.indexOf(P,z),Z&&(Ae(),ue))return fe();if(l&&se.length>=l)return fe(!0);break}ce.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:se.length,index:z}),H++}}else if(v&&q.length===0&&V.substring(z,z+_e)===v){if(J===-1)return fe();z=J+je,J=V.indexOf(r,z),le=V.indexOf(a,z)}else if(le!==-1&&(le<J||J===-1))q.push(V.substring(z,le)),z=le+he,le=V.indexOf(a,z);else{if(J===-1)break;if(q.push(V.substring(z,J)),es(J+je),Z&&(Ae(),ue))return fe();if(l&&se.length>=l)return fe(!0)}return Ee();function Pe(xe){se.push(xe),de=z}function Ke(xe){var Se=0;return Se=xe!==-1&&(xe=V.substring(H+1,xe))&&xe.trim()===""?xe.length:Se}function Ee(xe){return C||(xe===void 0&&(xe=V.substring(z)),q.push(xe),z=oe,Pe(q),Z&&Ae()),fe()}function es(xe){z=xe,Pe(q),q=[],J=V.indexOf(r,z)}function fe(xe){if(s.header&&!W&&se.length&&!pe){var Se=se[0],Re=Object.create(null),gs=new Set(Se);let Ts=!1;for(let Qe=0;Qe<Se.length;Qe++){let Me=Se[Qe];if(Re[Me=p(s.transformHeader)?s.transformHeader(Me,Qe):Me]){let ss,Es=Re[Me];for(;ss=Me+"_"+Es,Es++,gs.has(ss););gs.add(ss),Se[Qe]=ss,Re[Me]++,Ts=!0,(U=U===null?{}:U)[ss]=Me}else Re[Me]=1,Se[Qe]=Me;gs.add(Me)}Ts&&console.warn("Duplicate headers found and renamed."),pe=!0}return{data:se,errors:ce,meta:{delimiter:a,linebreak:r,aborted:ue,truncated:!!xe,cursor:de+(W||0),renamedHeaders:U}}}function Ae(){u(fe()),se=[],ce=[]}},this.abort=function(){ue=!0},this.getCharIndex=function(){return z}}function R(s){var a=s.data,r=k[a.workerId],v=!1;if(a.error)r.userError(a.error,a.file);else if(a.results&&a.results.data){var u={abort:function(){v=!0,O(a.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:x,resume:x};if(p(r.userStep)){for(var l=0;l<a.results.data.length&&(r.userStep({data:a.results.data[l],errors:a.results.errors,meta:a.results.meta},u),!v);l++);delete a.results}else p(r.userChunk)&&(r.userChunk(a.results,u,a.file),delete a.results)}a.finished&&!v&&O(a.workerId,a.results)}function O(s,a){var r=k[s];p(r.userComplete)&&r.userComplete(a),r.terminate(),delete k[s]}function x(){throw new Error("Not implemented.")}function h(s){if(typeof s!="object"||s===null)return s;var a,r=Array.isArray(s)?[]:{};for(a in s)r[a]=h(s[a]);return r}function j(s,a){return function(){s.apply(a,arguments)}}function p(s){return typeof s=="function"}return m.parse=function(s,a){var r=(a=a||{}).dynamicTyping||!1;if(p(r)&&(a.dynamicTypingFunction=r,r={}),a.dynamicTyping=r,a.transform=!!p(a.transform)&&a.transform,!a.worker||!m.WORKERS_SUPPORTED)return r=null,m.NODE_STREAM_INPUT,typeof s=="string"?(s=(v=>v.charCodeAt(0)!==65279?v:v.slice(1))(s),r=new(a.download?n:I)(a)):s.readable===!0&&p(s.read)&&p(s.on)?r=new ee(a):(y.File&&s instanceof File||s instanceof Object)&&(r=new S(a)),r.stream(s);(r=(()=>{var v;return!!m.WORKERS_SUPPORTED&&(v=(()=>{var u=y.URL||y.webkitURL||null,l=M.toString();return m.BLOB_URL||(m.BLOB_URL=u.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",l,")();"],{type:"text/javascript"})))})(),(v=new y.Worker(v)).onmessage=R,v.id=F++,k[v.id]=v)})()).userStep=a.step,r.userChunk=a.chunk,r.userComplete=a.complete,r.userError=a.error,a.step=p(a.step),a.chunk=p(a.chunk),a.complete=p(a.complete),a.error=p(a.error),delete a.worker,r.postMessage({input:s,config:a,workerId:r.id})},m.unparse=function(s,a){var r=!1,v=!0,u=",",l=`\r
`,w='"',U=w+w,pe=!1,P=null,ae=!1,z=((()=>{if(typeof a=="object"){if(typeof a.delimiter!="string"||m.BAD_DELIMITERS.filter(function(W){return a.delimiter.indexOf(W)!==-1}).length||(u=a.delimiter),typeof a.quotes!="boolean"&&typeof a.quotes!="function"&&!Array.isArray(a.quotes)||(r=a.quotes),typeof a.skipEmptyLines!="boolean"&&typeof a.skipEmptyLines!="string"||(pe=a.skipEmptyLines),typeof a.newline=="string"&&(l=a.newline),typeof a.quoteChar=="string"&&(w=a.quoteChar),typeof a.header=="boolean"&&(v=a.header),Array.isArray(a.columns)){if(a.columns.length===0)throw new Error("Option columns is empty");P=a.columns}a.escapeChar!==void 0&&(U=a.escapeChar+w),a.escapeFormulae instanceof RegExp?ae=a.escapeFormulae:typeof a.escapeFormulae=="boolean"&&a.escapeFormulae&&(ae=/^[=+\-@\t\r].*$/)}})(),new RegExp(t(w),"g"));if(typeof s=="string"&&(s=JSON.parse(s)),Array.isArray(s)){if(!s.length||Array.isArray(s[0]))return ue(null,s,pe);if(typeof s[0]=="object")return ue(P||Object.keys(s[0]),s,pe)}else if(typeof s=="object")return typeof s.data=="string"&&(s.data=JSON.parse(s.data)),Array.isArray(s.data)&&(s.fields||(s.fields=s.meta&&s.meta.fields||P),s.fields||(s.fields=Array.isArray(s.data[0])?s.fields:typeof s.data[0]=="object"?Object.keys(s.data[0]):[]),Array.isArray(s.data[0])||typeof s.data[0]=="object"||(s.data=[s.data])),ue(s.fields||[],s.data||[],pe);throw new Error("Unable to serialize unrecognized input");function ue(W,C,oe){var he="",je=(typeof W=="string"&&(W=JSON.parse(W)),typeof C=="string"&&(C=JSON.parse(C)),Array.isArray(W)&&0<W.length),_e=!Array.isArray(C[0]);if(je&&v){for(var Z=0;Z<W.length;Z++)0<Z&&(he+=u),he+=V(W[Z],Z);0<C.length&&(he+=l)}for(var se=0;se<C.length;se++){var ce=(je?W:C[se]).length,q=!1,de=je?Object.keys(C[se]).length===0:C[se].length===0;if(oe&&!je&&(q=oe==="greedy"?C[se].join("").trim()==="":C[se].length===1&&C[se][0].length===0),oe==="greedy"&&je){for(var me=[],te=0;te<ce;te++){var le=_e?W[te]:te;me.push(C[se][le])}q=me.join("").trim()===""}if(!q){for(var J=0;J<ce;J++){0<J&&!de&&(he+=u);var Te=je&&_e?W[J]:J;he+=V(C[se][Te],J)}se<C.length-1&&(!oe||0<ce&&!de)&&(he+=l)}}return he}function V(W,C){var oe,he;return W==null?"":W.constructor===Date?JSON.stringify(W).slice(1,25):(he=!1,ae&&typeof W=="string"&&ae.test(W)&&(W="'"+W,he=!0),oe=W.toString().replace(z,U),(he=he||r===!0||typeof r=="function"&&r(W,C)||Array.isArray(r)&&r[C]||((je,_e)=>{for(var Z=0;Z<_e.length;Z++)if(-1<je.indexOf(_e[Z]))return!0;return!1})(oe,m.BAD_DELIMITERS)||-1<oe.indexOf(u)||oe.charAt(0)===" "||oe.charAt(oe.length-1)===" ")?w+oe+w:oe)}},m.RECORD_SEP="",m.UNIT_SEP="",m.BYTE_ORDER_MARK="\uFEFF",m.BAD_DELIMITERS=["\r",`
`,'"',m.BYTE_ORDER_MARK],m.WORKERS_SUPPORTED=!$&&!!y.Worker,m.NODE_STREAM_INPUT=1,m.LocalChunkSize=10485760,m.RemoteChunkSize=5242880,m.DefaultDelimiter=",",m.Parser=_,m.ParserHandle=i,m.NetworkStreamer=n,m.FileStreamer=S,m.StringStreamer=I,m.ReadableStreamStreamer=ee,y.jQuery&&((K=y.jQuery).fn.parse=function(s){var a=s.config||{},r=[];return this.each(function(l){if(!(K(this).prop("tagName").toUpperCase()==="INPUT"&&K(this).attr("type").toLowerCase()==="file"&&y.FileReader)||!this.files||this.files.length===0)return!0;for(var w=0;w<this.files.length;w++)r.push({file:this.files[w],inputElem:this,instanceConfig:K.extend({},a)})}),v(),this;function v(){if(r.length===0)p(s.complete)&&s.complete();else{var l,w,U,pe,P=r[0];if(p(s.before)){var ae=s.before(P.file,P.inputElem);if(typeof ae=="object"){if(ae.action==="abort")return l="AbortError",w=P.file,U=P.inputElem,pe=ae.reason,void(p(s.error)&&s.error({name:l},w,U,pe));if(ae.action==="skip")return void u();typeof ae.config=="object"&&(P.instanceConfig=K.extend(P.instanceConfig,ae.config))}else if(ae==="skip")return void u()}var z=P.instanceConfig.complete;P.instanceConfig.complete=function(ue){p(z)&&z(ue,P.file,P.inputElem),u()},m.parse(P.file,P.instanceConfig)}}function u(){r.splice(0,1),v()}}),o&&(y.onmessage=function(s){s=s.data,m.WORKER_ID===void 0&&s&&(m.WORKER_ID=s.workerId),typeof s.input=="string"?y.postMessage({workerId:m.WORKER_ID,results:m.parse(s.input,s.config),finished:!0}):(y.File&&s.input instanceof File||s.input instanceof Object)&&(s=m.parse(s.input,s.config))&&y.postMessage({workerId:m.WORKER_ID,results:s,finished:!0})}),(n.prototype=Object.create(d.prototype)).constructor=n,(S.prototype=Object.create(d.prototype)).constructor=S,(I.prototype=Object.create(I.prototype)).constructor=I,(ee.prototype=Object.create(d.prototype)).constructor=ee,m})})(Vs);var Fa=Vs.exports;const Ia=Hs(Fa);function Oa({templates:f}){const[A,M]=b.useState([]),[y,K]=b.useState(""),[$,o]=b.useState(!1),[k,F]=b.useState(0),[m,d]=b.useState(!1),[n,S]=b.useState(null),I=b.useCallback(O=>{var h;const x=(h=O.target.files)==null?void 0:h[0];x&&(o(!0),S(null),Ia.parse(x,{complete:j=>{try{const p=j.data[0],s=j.data.slice(1),r=["name","email","role"].filter(u=>!p.includes(u));if(r.length>0)throw new Error(`CSV에 필수 필드가 없습니다: ${r.join(", ")}`);const v=s.filter(u=>u.some(l=>l.trim()!=="")).map((u,l)=>{const w={id:`recipient-${Date.now()}-${l}`,name:"",email:"",role:"",customFields:{},status:"pending"};return p.forEach((U,pe)=>{var ae;const P=((ae=u[pe])==null?void 0:ae.trim())||"";U==="name"?w.name=P:U==="email"?w.email=P:U==="role"?w.role=P:U&&P&&(w.customFields[U]=P)}),w}).filter(u=>u.email&&u.name);M(v),o(!1)}catch(p){S(p instanceof Error?p.message:"CSV 파싱 중 오류가 발생했습니다."),o(!1)}},error:j=>{S(`파일 읽기 오류: ${j.message}`),o(!1)},header:!1,skipEmptyLines:!0}))},[]),ee=async()=>{if(!y||A.length===0){S("템플릿을 선택하고 수신자 목록을 업로드해주세요.");return}d(!0),F(0),S(null);for(let O=0;O<A.length;O++){const x=A[O];try{M(h=>h.map(j=>j.id===x.id?{...j,status:"sending"}:j)),await new Promise(h=>setTimeout(h,500)),M(h=>h.map(j=>j.id===x.id?{...j,status:"sent"}:j))}catch{M(j=>j.map(p=>p.id===x.id?{...p,status:"failed"}:p))}F((O+1)/A.length*100)}d(!1)},i=()=>{const x=[["name","email","role","department","start_date"],["김철수","chulsoo.kim@example.com","구매자","영업팀","2024-08-01"],["이영희","younghee.lee@example.com","판매자","개발팀","2024-08-15"],["박민수","minsoo.park@example.com","증인","법무팀","2024-09-01"]].map(p=>p.join(",")).join(`
`),h=new Blob([x],{type:"text/csv;charset=utf-8;"}),j=document.createElement("a");j.href=URL.createObjectURL(h),j.download="bulk_send_sample.csv",j.click()},t=O=>{switch(O){case"pending":return e.jsx(L,{variant:"secondary",children:"대기중"});case"sending":return e.jsx(L,{variant:"default",children:"발송중"});case"sent":return e.jsx(L,{variant:"default",className:"bg-green-600",children:"발송완료"});case"failed":return e.jsx(L,{variant:"destructive",children:"실패"})}},_=A.filter(O=>O.status==="sent").length,R=A.filter(O=>O.status==="failed").length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"대량 발송"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"여러 수신자에게 동일한 계약서를 한 번에 발송할 수 있습니다."})]}),e.jsxs(g,{children:[e.jsxs(T,{children:[e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(Le,{className:"h-5 w-5"}),"Step 1: 템플릿 선택"]}),e.jsx(we,{children:"발송할 계약서 템플릿을 선택해주세요."})]}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"template",children:"계약서 템플릿"}),e.jsxs(Ne,{value:y,onValueChange:K,children:[e.jsx(ve,{id:"template",children:e.jsx(ye,{placeholder:"템플릿을 선택하세요"})}),e.jsx(be,{children:f.map(O=>e.jsxs(B,{value:O.id,children:[O.name," (",O.category,")"]},O.id))})]})]})})]}),e.jsxs(g,{children:[e.jsxs(T,{children:[e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(ps,{className:"h-5 w-5"}),"Step 2: 수신자 목록 업로드"]}),e.jsx(we,{children:"CSV 파일로 수신자 목록을 업로드하세요."})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs(D,{htmlFor:"csv-upload",className:"cursor-pointer",children:[e.jsxs("div",{className:"border-2 border-dashed rounded-lg p-6 text-center hover:border-primary transition-colors",children:[e.jsx(ze,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["클릭하여 CSV 파일을 선택하거나",e.jsx("br",{}),"여기에 드래그 앤 드롭하세요"]})]}),e.jsx(ne,{id:"csv-upload",type:"file",accept:".csv",className:"hidden",onChange:I,disabled:$})]})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs(c,{variant:"outline",size:"sm",onClick:i,className:"whitespace-nowrap",children:[e.jsx(is,{className:"h-4 w-4 mr-2"}),"샘플 CSV 다운로드"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"필수 필드: name, email, role"})]})]}),n&&e.jsxs(We,{variant:"destructive",children:[e.jsx(Ye,{className:"h-4 w-4"}),e.jsx(Xe,{children:n})]}),A.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm font-medium",children:["총 ",A.length,"명의 수신자"]}),m&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ss,{value:k,className:"w-32"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[Math.round(k),"%"]})]})]}),e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs(ls,{children:[e.jsx(ns,{children:e.jsxs(Ce,{children:[e.jsx(ie,{children:"이름"}),e.jsx(ie,{children:"이메일"}),e.jsx(ie,{children:"역할"}),e.jsx(ie,{children:"추가 필드"}),e.jsx(ie,{children:"상태"})]})}),e.jsx(rs,{children:A.slice(0,5).map(O=>e.jsxs(Ce,{children:[e.jsx(Q,{children:O.name}),e.jsx(Q,{children:O.email}),e.jsx(Q,{children:O.role}),e.jsx(Q,{children:e.jsxs("div",{className:"flex gap-1",children:[Object.keys(O.customFields).slice(0,2).map(x=>e.jsx(L,{variant:"outline",className:"text-xs",children:x},x)),Object.keys(O.customFields).length>2&&e.jsxs(L,{variant:"outline",className:"text-xs",children:["+",Object.keys(O.customFields).length-2]})]})}),e.jsx(Q,{children:t(O.status)})]},O.id))})]})}),A.length>5&&e.jsxs("p",{className:"text-sm text-muted-foreground text-center",children:["... 외 ",A.length-5,"명"]})]})]})]}),A.length>0&&y&&e.jsx(g,{children:e.jsx(N,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[_>0&&e.jsxs("p",{className:"text-sm text-green-600 flex items-center gap-1",children:[e.jsx(De,{className:"h-4 w-4"}),_,"건 발송 완료"]}),R>0&&e.jsxs("p",{className:"text-sm text-red-600 flex items-center gap-1",children:[e.jsx(Ye,{className:"h-4 w-4"}),R,"건 발송 실패"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(c,{variant:"outline",disabled:m,children:[e.jsx(Oe,{className:"h-4 w-4 mr-2"}),"미리보기"]}),e.jsxs(c,{onClick:ee,disabled:m||!y,children:[e.jsx(Je,{className:"h-4 w-4 mr-2"}),m?"발송 중...":"대량 발송 시작"]})]})]})})})]})}function Pa(){const[f,A]=b.useState([{id:"1",name:"(주)테크코퍼레이션 법인인감",type:"company",imageUrl:"/stamps/company-seal.png",createdAt:"2024-01-10",updatedAt:"2024-01-10",usageCount:45,lastUsed:"2024-01-20",status:"active",permissions:{users:["admin@techcorp.com","ceo@techcorp.com"],departments:["경영지원실","법무팀"],roles:["대표이사","법무팀장"]}},{id:"2",name:"영업본부 직인",type:"department",imageUrl:"/stamps/sales-dept-seal.png",createdAt:"2024-01-15",updatedAt:"2024-01-15",usageCount:23,lastUsed:"2024-01-19",status:"active",permissions:{users:["sales-head@techcorp.com"],departments:["영업본부"],roles:["영업본부장","영업팀장"]}}]),[M,y]=b.useState([{id:"1",stampId:"1",stampName:"(주)테크코퍼레이션 법인인감",contractId:"contract-1",contractTitle:"소프트웨어 개발 용역계약서",usedBy:"admin@techcorp.com",usedAt:"2024-01-20 14:30:00",ipAddress:"192.168.1.100",userAgent:"Chrome/120.0.0.0"}]),[K,$]=b.useState(!1),[o,k]=b.useState(!1),[F,m]=b.useState(null),[d,n]=b.useState("stamps"),[S,I]=b.useState({name:"",type:"company",image:null}),ee=x=>{var j;const h=(j=x.target.files)==null?void 0:j[0];h&&I({...S,image:h})},i=async()=>{if(!S.name||!S.image)return;const x={id:Date.now().toString(),name:S.name,type:S.type,imageUrl:URL.createObjectURL(S.image),createdAt:new Date().toISOString().split("T")[0],updatedAt:new Date().toISOString().split("T")[0],usageCount:0,lastUsed:null,status:"active",permissions:{users:[],departments:[],roles:[]}};A([...f,x]),$(!1),I({name:"",type:"company",image:null})},t=x=>{A(f.map(h=>h.id===x?{...h,status:h.status==="active"?"inactive":"active"}:h))},_=x=>{confirm("정말로 이 도장을 삭제하시겠습니까?")&&A(f.filter(h=>h.id!==x))},R=x=>{switch(x){case"active":return e.jsx(L,{className:"bg-green-600",children:"사용중"});case"inactive":return e.jsx(L,{variant:"secondary",children:"비활성"});case"suspended":return e.jsx(L,{variant:"destructive",children:"일시중지"})}},O=x=>{switch(x){case"company":return e.jsx(L,{variant:"default",children:"법인"});case"department":return e.jsx(L,{variant:"secondary",children:"부서"});case"personal":return e.jsx(L,{variant:"outline",children:"개인"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"전자도장 관리"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"회사 및 개인 도장을 등록하고 사용 권한을 관리합니다."})]}),e.jsxs(c,{onClick:()=>$(!0),children:[e.jsx(Ze,{className:"h-4 w-4 mr-2"}),"새 도장 등록"]})]}),e.jsxs($e,{value:d,onValueChange:n,children:[e.jsxs(Ue,{className:"grid w-full grid-cols-3",children:[e.jsxs(Y,{value:"stamps",children:[e.jsx(as,{className:"h-4 w-4 mr-2"}),"도장 목록"]}),e.jsxs(Y,{value:"permissions",children:[e.jsx(qe,{className:"h-4 w-4 mr-2"}),"권한 설정"]}),e.jsxs(Y,{value:"history",children:[e.jsx(ts,{className:"h-4 w-4 mr-2"}),"사용 이력"]})]}),e.jsx(G,{value:"stamps",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:f.map(x=>e.jsxs(g,{className:"relative",children:[e.jsx(T,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(E,{className:"text-base",children:x.name}),e.jsxs("div",{className:"flex gap-1",children:[O(x.type),R(x.status)]})]})}),e.jsxs(N,{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-center p-4 bg-gray-50 rounded-lg",children:e.jsx("div",{className:"w-32 h-32 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsx(as,{className:"h-16 w-16 text-gray-400"})})}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"사용 횟수"}),e.jsxs("span",{className:"font-medium",children:[x.usageCount,"회"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"마지막 사용"}),e.jsx("span",{className:"font-medium",children:x.lastUsed||"사용 기록 없음"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"등록일"}),e.jsx("span",{className:"font-medium",children:x.createdAt})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(c,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>{m(x),k(!0)},children:[e.jsx(Be,{className:"h-4 w-4 mr-1"}),"권한"]}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>t(x.id),children:x.status==="active"?e.jsx(ia,{className:"h-4 w-4"}):e.jsx(Oe,{className:"h-4 w-4"})}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>_(x.id),children:e.jsx(_s,{className:"h-4 w-4"})})]})]})]},x.id))})}),e.jsx(G,{value:"permissions",className:"space-y-4",children:e.jsxs(g,{children:[e.jsxs(T,{children:[e.jsx(E,{children:"도장 권한 관리"}),e.jsx(we,{children:"도장별 사용 권한을 설정합니다."})]}),e.jsx(N,{children:e.jsx("div",{className:"space-y-4",children:f.map(x=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(as,{className:"h-6 w-6 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:x.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[x.permissions.users.length,"명,",x.permissions.departments.length,"개 부서,",x.permissions.roles.length,"개 역할"]})]})]}),e.jsxs(c,{variant:"outline",onClick:()=>{m(x),k(!0)},children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"권한 설정"]})]},x.id))})})]})}),e.jsx(G,{value:"history",className:"space-y-4",children:e.jsxs(g,{children:[e.jsxs(T,{children:[e.jsx(E,{children:"도장 사용 이력"}),e.jsx(we,{children:"최근 30일간의 도장 사용 기록입니다."})]}),e.jsx(N,{children:e.jsxs(ls,{children:[e.jsx(ns,{children:e.jsxs(Ce,{children:[e.jsx(ie,{children:"사용일시"}),e.jsx(ie,{children:"도장"}),e.jsx(ie,{children:"계약서"}),e.jsx(ie,{children:"사용자"}),e.jsx(ie,{children:"IP 주소"}),e.jsx(ie,{children:"상태"})]})}),e.jsx(rs,{children:M.map(x=>e.jsxs(Ce,{children:[e.jsx(Q,{children:x.usedAt}),e.jsx(Q,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(as,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm",children:x.stampName})]})}),e.jsx(Q,{children:x.contractTitle}),e.jsx(Q,{children:x.usedBy}),e.jsx(Q,{className:"text-xs text-muted-foreground",children:x.ipAddress}),e.jsx(Q,{children:e.jsxs(L,{variant:"default",className:"bg-green-600",children:[e.jsx(De,{className:"h-3 w-3 mr-1"}),"정상"]})})]},x.id))})]})})]})})]}),e.jsx(hs,{open:K,onOpenChange:$,children:e.jsxs(os,{children:[e.jsxs(ms,{children:[e.jsx(xs,{children:"새 도장 등록"}),e.jsx(us,{children:"회사 또는 개인 도장을 등록하세요. 등록된 도장은 계약서에 전자적으로 날인됩니다."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"stamp-name",children:"도장 이름"}),e.jsx(ne,{id:"stamp-name",placeholder:"예: (주)테크코퍼레이션 법인인감",value:S.name,onChange:x=>I({...S,name:x.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"stamp-type",children:"도장 유형"}),e.jsxs(Ne,{value:S.type,onValueChange:x=>I({...S,type:x}),children:[e.jsx(ve,{id:"stamp-type",children:e.jsx(ye,{})}),e.jsxs(be,{children:[e.jsx(B,{value:"company",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ha,{className:"h-4 w-4"}),"법인 도장"]})}),e.jsx(B,{value:"department",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ps,{className:"h-4 w-4"}),"부서 도장"]})}),e.jsx(B,{value:"personal",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Cs,{className:"h-4 w-4"}),"개인 도장"]})})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"stamp-image",children:"도장 이미지"}),e.jsxs("div",{className:"border-2 border-dashed rounded-lg p-4 text-center hover:border-primary transition-colors",children:[e.jsxs("label",{htmlFor:"stamp-image",className:"cursor-pointer",children:[e.jsx(ze,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"클릭하여 이미지 선택"}),S.image&&e.jsx("p",{className:"text-sm font-medium mt-2",children:S.image.name})]}),e.jsx(ne,{id:"stamp-image",type:"file",accept:"image/*",className:"hidden",onChange:ee})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"투명 배경의 PNG 파일을 권장합니다. (최대 2MB)"})]})]}),e.jsxs(js,{children:[e.jsx(c,{variant:"outline",onClick:()=>$(!1),children:"취소"}),e.jsxs(c,{onClick:i,disabled:!S.name||!S.image,children:[e.jsx(ze,{className:"h-4 w-4 mr-2"}),"도장 등록"]})]})]})}),e.jsx(hs,{open:o,onOpenChange:k,children:e.jsxs(os,{className:"max-w-2xl",children:[e.jsxs(ms,{children:[e.jsx(xs,{children:"도장 사용 권한 설정"}),e.jsxs(us,{children:[F==null?void 0:F.name,"의 사용 권한을 설정합니다."]})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{children:"사용자별 권한"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ne,{placeholder:"이메일 주소 입력"}),e.jsx(c,{size:"sm",children:"추가"})]}),e.jsx("div",{className:"space-y-2 mt-2",children:F==null?void 0:F.permissions.users.map(x=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-sm",children:x}),e.jsx(c,{variant:"ghost",size:"sm",children:e.jsx(X,{className:"h-4 w-4"})})]},x))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{children:"부서별 권한"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Ne,{children:[e.jsx(ve,{children:e.jsx(ye,{placeholder:"부서 선택"})}),e.jsxs(be,{children:[e.jsx(B,{value:"management",children:"경영지원실"}),e.jsx(B,{value:"sales",children:"영업본부"}),e.jsx(B,{value:"legal",children:"법무팀"}),e.jsx(B,{value:"hr",children:"인사팀"})]})]}),e.jsx(c,{size:"sm",children:"추가"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{children:"역할별 권한"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Ne,{children:[e.jsx(ve,{children:e.jsx(ye,{placeholder:"역할 선택"})}),e.jsxs(be,{children:[e.jsx(B,{value:"ceo",children:"대표이사"}),e.jsx(B,{value:"executive",children:"임원"}),e.jsx(B,{value:"team-lead",children:"팀장"}),e.jsx(B,{value:"manager",children:"매니저"})]})]}),e.jsx(c,{size:"sm",children:"추가"})]})]})]}),e.jsxs(js,{children:[e.jsx(c,{variant:"outline",onClick:()=>k(!1),children:"취소"}),e.jsxs(c,{children:[e.jsx(qe,{className:"h-4 w-4 mr-2"}),"권한 저장"]})]})]})})]})}function La(){const[f,A]=b.useState([{id:"sms",name:"SMS 인증",type:"sms",enabled:!0,icon:Ie,description:"휴대폰 번호로 인증 코드를 발송합니다.",settings:{provider:"twilio",timeout:180,codeLength:6}},{id:"email",name:"이메일 인증",type:"email",enabled:!0,icon:Ve,description:"등록된 이메일로 인증 링크를 발송합니다.",settings:{provider:"sendgrid",timeout:600,linkExpiry:24}},{id:"otp",name:"OTP 인증",type:"otp",enabled:!1,icon:Ks,description:"Google Authenticator 등 OTP 앱을 사용합니다.",settings:{algorithm:"TOTP",digits:6,period:30}},{id:"biometric",name:"생체 인증",type:"biometric",enabled:!1,icon:na,description:"지문, 얼굴 인식 등 생체 정보로 인증합니다.",settings:{methods:["fingerprint","face","iris"],fallback:"pin"}},{id:"certificate",name:"공동인증서",type:"certificate",enabled:!1,icon:la,description:"공동인증서(구 공인인증서)로 본인 확인을 합니다.",settings:{providers:["yessign","signgate"],level:"personal"}}]),[M,y]=b.useState([{id:"1",name:"고액 계약서",description:"계약 금액이 1억원 이상인 경우",conditions:["amount >= 100000000"],authMethods:["sms","certificate"],enabled:!0},{id:"2",name:"인사 관련 문서",description:"근로계약서, 퇴직 합의서 등 인사 문서",conditions:['category == "hr"'],authMethods:["sms","email"],enabled:!0},{id:"3",name:"법적 구속력 문서",description:"NDA, 라이선스 계약 등 법적 효력이 있는 문서",conditions:["legal_binding == true"],authMethods:["certificate"],enabled:!1}]);b.useState("sms");const[K,$]=b.useState(""),[o,k]=b.useState(""),[F,m]=b.useState(!1),[d,n]=b.useState(!1),S=t=>{A(_=>_.map(R=>R.id===t?{...R,enabled:!R.enabled}:R))},I=t=>{y(_=>_.map(R=>R.id===t?{...R,enabled:!R.enabled}:R))},ee=async()=>{K&&(m(!0),await new Promise(t=>setTimeout(t,2e3)),m(!1),alert(`테스트 SMS가 ${K}로 발송되었습니다.`))},i=async()=>{o&&(n(!0),await new Promise(t=>setTimeout(t,2e3)),n(!1),alert(`테스트 이메일이 ${o}로 발송되었습니다.`))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"서명 인증 설정"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"서명 전 본인 확인을 위한 인증 방법을 설정합니다."})]}),e.jsxs($e,{defaultValue:"methods",className:"space-y-4",children:[e.jsxs(Ue,{className:"grid w-full grid-cols-3",children:[e.jsxs(Y,{value:"methods",children:[e.jsx(qe,{className:"h-4 w-4 mr-2"}),"인증 방법"]}),e.jsxs(Y,{value:"requirements",children:[e.jsx(Ca,{className:"h-4 w-4 mr-2"}),"인증 요구사항"]}),e.jsxs(Y,{value:"test",children:[e.jsx(ra,{className:"h-4 w-4 mr-2"}),"테스트"]})]}),e.jsxs(G,{value:"methods",className:"space-y-4",children:[e.jsxs(We,{children:[e.jsx(cs,{className:"h-4 w-4"}),e.jsx(Xe,{children:"활성화된 인증 방법 중 서명자가 선택하여 사용할 수 있습니다. 최소 1개 이상의 인증 방법을 활성화해야 합니다."})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:f.map(t=>{const _=t.icon;return e.jsxs(g,{className:t.enabled?"":"opacity-60",children:[e.jsxs(T,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(E,{className:"text-base flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5"}),t.name]}),e.jsx(ke,{checked:t.enabled,onCheckedChange:()=>S(t.id)})]}),e.jsx(we,{children:t.description})]}),e.jsx(N,{children:t.enabled&&e.jsxs("div",{className:"space-y-3",children:[t.type==="sms"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"SMS 제공업체"}),e.jsx("span",{className:"font-medium",children:"Twilio"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"인증 코드 유효시간"}),e.jsx("span",{className:"font-medium",children:"3분"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"코드 길이"}),e.jsx("span",{className:"font-medium",children:"6자리"})]})]}),t.type==="email"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"이메일 제공업체"}),e.jsx("span",{className:"font-medium",children:"SendGrid"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"링크 유효시간"}),e.jsx("span",{className:"font-medium",children:"24시간"})]})]}),e.jsxs(c,{variant:"outline",size:"sm",className:"w-full",children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"설정"]})]})})]},t.id)})})]}),e.jsxs(G,{value:"requirements",className:"space-y-4",children:[e.jsxs(We,{children:[e.jsx(cs,{className:"h-4 w-4"}),e.jsx(Xe,{children:"특정 조건에 해당하는 계약서에 대해 추가 인증을 요구할 수 있습니다."})]}),e.jsx("div",{className:"space-y-4",children:M.map(t=>e.jsxs(g,{children:[e.jsx(T,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(E,{className:"text-base",children:t.name}),e.jsx(we,{children:t.description})]}),e.jsx(ke,{checked:t.enabled,onCheckedChange:()=>I(t.id)})]})}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"적용 조건"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.conditions.map((_,R)=>e.jsx(L,{variant:"secondary",children:_},R))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"필수 인증 방법"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.authMethods.map(_=>{const R=f.find(x=>x.id===_);if(!R)return null;const O=R.icon;return e.jsxs(L,{variant:"default",children:[e.jsx(O,{className:"h-3 w-3 mr-1"}),R.name]},_)})})]})]})})]},t.id))}),e.jsxs(g,{children:[e.jsx(T,{children:e.jsx(E,{className:"text-base",children:"새 요구사항 추가"})}),e.jsx(N,{children:e.jsxs(c,{variant:"outline",className:"w-full",children:[e.jsx(Ze,{className:"h-4 w-4 mr-2"}),"요구사항 추가"]})})]})]}),e.jsxs(G,{value:"test",className:"space-y-4",children:[e.jsxs(We,{children:[e.jsx(cs,{className:"h-4 w-4"}),e.jsx(Xe,{children:"인증 기능이 정상적으로 작동하는지 테스트해보세요."})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(g,{children:[e.jsx(T,{children:e.jsxs(E,{className:"text-base flex items-center gap-2",children:[e.jsx(Ie,{className:"h-5 w-5"}),"SMS 인증 테스트"]})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"test-phone",children:"휴대폰 번호"}),e.jsx(ne,{id:"test-phone",placeholder:"010-1234-5678",value:K,onChange:t=>$(t.target.value)})]}),e.jsx(c,{className:"w-full",onClick:ee,disabled:!K||F,children:F?e.jsxs(e.Fragment,{children:[e.jsx(Fe,{className:"h-4 w-4 mr-2 animate-spin"}),"발송 중..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Je,{className:"h-4 w-4 mr-2"}),"테스트 SMS 발송"]})})]})]}),e.jsxs(g,{children:[e.jsx(T,{children:e.jsxs(E,{className:"text-base flex items-center gap-2",children:[e.jsx(Ve,{className:"h-5 w-5"}),"이메일 인증 테스트"]})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"test-email",children:"이메일 주소"}),e.jsx(ne,{id:"test-email",type:"email",placeholder:"test@example.com",value:o,onChange:t=>k(t.target.value)})]}),e.jsx(c,{className:"w-full",onClick:i,disabled:!o||d,children:d?e.jsxs(e.Fragment,{children:[e.jsx(Fe,{className:"h-4 w-4 mr-2 animate-spin"}),"발송 중..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Je,{className:"h-4 w-4 mr-2"}),"테스트 이메일 발송"]})})]})]})]}),e.jsxs(g,{children:[e.jsxs(T,{children:[e.jsx(E,{children:"인증 통계"}),e.jsx(we,{children:"최근 30일간의 인증 현황"})]}),e.jsx(N,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold",children:"342"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"전체 인증 시도"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:"325"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"성공"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:"17"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"실패"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold",children:"94.9%"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"성공률"})]})]})})]})]})]})]})}function qa(){const[f,A]=b.useState([{id:"v1",version:"1.0.0",createdAt:"2024-01-10 10:00:00",createdBy:"admin@techcorp.com",message:"초기 버전 - 표준 근로계약서 템플릿",changes:{additions:0,deletions:0,modified:0},status:"archived"},{id:"v2",version:"1.1.0",createdAt:"2024-01-15 14:30:00",createdBy:"legal@techcorp.com",message:"급여 조항 수정 및 복리후생 섹션 추가",changes:{additions:12,deletions:3,modified:5},status:"archived",parent:"v1"},{id:"v3",version:"1.2.0",createdAt:"2024-01-20 09:15:00",createdBy:"hr@techcorp.com",message:"재택근무 정책 반영",changes:{additions:8,deletions:0,modified:3},status:"published",parent:"v2"},{id:"v4",version:"2.0.0-draft",createdAt:"2024-01-25 16:45:00",createdBy:"admin@techcorp.com",message:"2024년 법률 개정사항 반영 (작업중)",changes:{additions:25,deletions:10,modified:15},status:"draft",parent:"v3"}]),[M,y]=b.useState(["v2","v3"]),[K,$]=b.useState(!1),[o,k]=b.useState(null),[F,m]=b.useState(""),[d,n]=b.useState("timeline"),S=[{type:"added",field:"복리후생",newValue:"회사는 직원의 복지를 위해 다음과 같은 혜택을 제공한다..."},{type:"modified",field:"급여",oldValue:"기본급은 월 3,000,000원으로 한다.",newValue:"기본급은 월 3,500,000원으로 하며, 성과에 따라 인센티브를 지급한다."},{type:"removed",field:"수습기간",oldValue:"수습기간은 3개월로 한다."}],I=t=>{switch(t){case"draft":return e.jsx(L,{variant:"secondary",children:"초안"});case"published":return e.jsx(L,{className:"bg-green-600",children:"배포됨"});case"archived":return e.jsx(L,{variant:"default",children:"보관"})}},ee=t=>e.jsxs("div",{className:"flex gap-3 text-sm",children:[e.jsxs("span",{className:"text-green-600",children:["+",t.additions]}),e.jsxs("span",{className:"text-red-600",children:["-",t.deletions]}),e.jsxs("span",{className:"text-blue-600",children:["~",t.modified]})]}),i=async()=>{if(!o||!F)return;const t={id:`v${f.length+1}`,version:`${o.version}-restored`,createdAt:new Date().toISOString(),createdBy:"current-user@techcorp.com",message:F,changes:{additions:0,deletions:0,modified:1},status:"draft",parent:o.id};A([...f,t]),$(!1),m("")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"계약서 버전 관리"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"계약서의 모든 변경 사항을 추적하고 이전 버전을 복원할 수 있습니다."})]}),e.jsxs($e,{value:d,onValueChange:n,children:[e.jsxs(Ue,{className:"grid w-full grid-cols-3",children:[e.jsxs(Y,{value:"timeline",children:[e.jsx(ts,{className:"h-4 w-4 mr-2"}),"버전 타임라인"]}),e.jsxs(Y,{value:"compare",children:[e.jsx(ja,{className:"h-4 w-4 mr-2"}),"버전 비교"]}),e.jsxs(Y,{value:"branches",children:[e.jsx(ys,{className:"h-4 w-4 mr-2"}),"브랜치 관리"]})]}),e.jsx(G,{value:"timeline",className:"space-y-4",children:e.jsxs(g,{children:[e.jsxs(T,{children:[e.jsx(E,{children:"버전 히스토리"}),e.jsx(we,{children:"계약서의 모든 수정 이력을 시간순으로 확인할 수 있습니다."})]}),e.jsx(N,{children:f.map((t,_)=>e.jsxs("div",{className:"relative",children:[_<f.length-1&&e.jsx("div",{className:"absolute left-6 top-12 bottom-0 w-0.5 bg-gray-200"}),e.jsxs("div",{className:"flex gap-4 pb-8",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center bg-gray-100",children:e.jsx(Le,{className:"h-6 w-6 text-gray-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("h4",{className:"font-medium",children:["버전 ",t.version]}),I(t.status)]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:t.message}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Cs,{className:"h-3 w-3"}),t.createdBy]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Fe,{className:"h-3 w-3"}),t.createdAt]}),ee(t.changes)]}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>{k(t),$(!0)},children:[e.jsx(Is,{className:"h-3 w-3 mr-1"}),"복원"]}),e.jsxs(c,{variant:"outline",size:"sm",children:[e.jsx(Oe,{className:"h-3 w-3 mr-1"}),"보기"]})]})]})]})]},t.id))})]})}),e.jsx(G,{value:"compare",className:"space-y-4",children:e.jsxs(g,{children:[e.jsxs(T,{children:[e.jsx(E,{children:"버전 비교"}),e.jsx(we,{children:"두 버전 간의 변경 사항을 비교할 수 있습니다."})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(D,{children:"이전 버전"}),e.jsxs(Ne,{value:M[0],onValueChange:t=>y([t,M[1]]),children:[e.jsx(ve,{children:e.jsx(ye,{placeholder:"버전 선택"})}),e.jsx(be,{children:f.map(t=>e.jsxs(B,{value:t.id,children:["v",t.version," - ",t.createdAt]},t.id))})]})]}),e.jsxs("div",{children:[e.jsx(D,{children:"최신 버전"}),e.jsxs(Ne,{value:M[1],onValueChange:t=>y([M[0],t]),children:[e.jsx(ve,{children:e.jsx(ye,{placeholder:"버전 선택"})}),e.jsx(be,{children:f.map(t=>e.jsxs(B,{value:t.id,children:["v",t.version," - ",t.createdAt]},t.id))})]})]})]}),e.jsx("div",{className:"space-y-3",children:S.map((t,_)=>e.jsxs("div",{className:`p-4 rounded-lg border ${t.type==="added"?"bg-green-50 border-green-200":t.type==="removed"?"bg-red-50 border-red-200":"bg-blue-50 border-blue-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(L,{variant:t.type==="added"?"default":t.type==="removed"?"destructive":"secondary",className:t.type==="added"?"bg-green-600":t.type==="removed"?"":"bg-blue-600",children:t.type==="added"?"추가":t.type==="removed"?"삭제":"수정"}),e.jsx("span",{className:"font-medium",children:t.field})]}),t.oldValue&&e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"이전:"}),e.jsx("p",{className:"text-sm line-through text-red-600",children:t.oldValue})]}),t.newValue&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"현재:"}),e.jsx("p",{className:"text-sm text-green-600",children:t.newValue})]})]},_))})]})]})}),e.jsxs(G,{value:"branches",className:"space-y-4",children:[e.jsxs(We,{children:[e.jsx(cs,{className:"h-4 w-4"}),e.jsx(Xe,{children:"브랜치를 사용하여 여러 버전의 계약서를 동시에 관리할 수 있습니다. 각 브랜치는 독립적으로 수정되며, 필요시 병합할 수 있습니다."})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs(g,{children:[e.jsx(T,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(E,{className:"text-base",children:"main"}),e.jsx(we,{children:"기본 브랜치 - 현재 배포된 버전"})]}),e.jsx(L,{className:"bg-green-600",children:"활성"})]})}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"최신 버전"}),e.jsx("span",{className:"font-medium",children:"1.2.0"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"마지막 수정"}),e.jsx("span",{className:"font-medium",children:"2024-01-20"})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsxs(c,{variant:"outline",size:"sm",className:"flex-1",children:[e.jsx(Oe,{className:"h-4 w-4 mr-2"}),"보기"]}),e.jsx(c,{variant:"outline",size:"sm",children:e.jsx(ys,{className:"h-4 w-4"})})]})]})})]}),e.jsxs(g,{children:[e.jsx(T,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(E,{className:"text-base",children:"2024-legal-update"}),e.jsx(we,{children:"2024년 법률 개정사항 반영"})]}),e.jsx(L,{variant:"secondary",children:"작업중"})]})}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"기반 버전"}),e.jsx("span",{className:"font-medium",children:"1.2.0"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"변경 사항"}),e.jsx("span",{className:"font-medium",children:"15개 파일"})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsxs(c,{variant:"outline",size:"sm",className:"flex-1",children:[e.jsx(Oe,{className:"h-4 w-4 mr-2"}),"보기"]}),e.jsxs(c,{variant:"outline",size:"sm",children:[e.jsx(ga,{className:"h-4 w-4 mr-2"}),"병합"]})]})]})})]})]}),e.jsxs(g,{children:[e.jsx(T,{children:e.jsx(E,{className:"text-base",children:"새 브랜치 생성"})}),e.jsx(N,{children:e.jsxs(c,{variant:"outline",className:"w-full",children:[e.jsx(ys,{className:"h-4 w-4 mr-2"}),"브랜치 생성"]})})]})]})]}),e.jsx(hs,{open:K,onOpenChange:$,children:e.jsxs(os,{children:[e.jsxs(ms,{children:[e.jsx(xs,{children:"버전 복원"}),e.jsxs(us,{children:["버전 ",o==null?void 0:o.version,"으로 복원하시겠습니까? 새로운 버전이 생성되며 현재 버전은 보존됩니다."]})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"restore-message",children:"복원 사유"}),e.jsx(He,{id:"restore-message",placeholder:"왜 이 버전으로 복원하는지 설명해주세요...",value:F,onChange:t=>m(t.target.value),rows:3})]}),e.jsxs(We,{children:[e.jsx(Ye,{className:"h-4 w-4"}),e.jsx(Xe,{children:"복원 후에도 현재 버전은 그대로 유지되며, 새로운 버전으로 복원된 내용이 추가됩니다."})]})]}),e.jsxs(js,{children:[e.jsx(c,{variant:"outline",onClick:()=>$(!1),children:"취소"}),e.jsxs(c,{onClick:i,disabled:!F,children:[e.jsx(Is,{className:"h-4 w-4 mr-2"}),"복원하기"]})]})]})})]})}function $a(){const{toast:f}=fs(),[A,M]=b.useState([{id:"1",name:"Google Drive",type:"google_drive",connected:!0,email:"user@gmail.com",lastSync:"2024-01-22 14:30",settings:{autoSync:!0,syncInterval:"realtime",folderPath:"/SignChain/Contracts",encryption:!0,twoFactorRequired:!1}},{id:"2",name:"Dropbox",type:"dropbox",connected:!1,settings:{autoSync:!1,syncInterval:"manual",folderPath:"/SignChain",encryption:!1,twoFactorRequired:!1}},{id:"3",name:"OneDrive",type:"onedrive",connected:!1,settings:{autoSync:!1,syncInterval:"manual",folderPath:"/Documents/SignChain",encryption:!1,twoFactorRequired:!1}}]),[y]=b.useState([{id:"1",name:"서비스 이용 계약서_v2.pdf",service:"Google Drive",localPath:"/contracts/2024/01/service-agreement-v2.pdf",cloudPath:"/SignChain/Contracts/2024/service-agreement-v2.pdf",lastSync:"2024-01-22 14:30",status:"synced",size:"2.4 MB"},{id:"2",name:"근로계약서_김철수.pdf",service:"Google Drive",localPath:"/contracts/2024/01/employment-kim.pdf",cloudPath:"/SignChain/Contracts/2024/employment-kim.pdf",lastSync:"2024-01-22 13:15",status:"syncing",size:"1.8 MB"},{id:"3",name:"NDA_테크기업.pdf",service:"Google Drive",localPath:"/contracts/2024/01/nda-tech.pdf",cloudPath:"/SignChain/Contracts/2024/nda-tech.pdf",lastSync:"2024-01-22 12:00",status:"error",size:"956 KB"}]),[K,$]=b.useState(null),o=async n=>{const S=A.find(I=>I.id===n);S&&(f({title:"연결 중",description:`${S.name} 연결을 시작합니다...`}),setTimeout(()=>{M(I=>I.map(ee=>ee.id===n?{...ee,connected:!0,email:`user@${ee.type.replace("_","")}.com`}:ee)),f({title:"연결 완료",description:`${S.name}이(가) 성공적으로 연결되었습니다.`})},2e3))},k=n=>{const S=A.find(I=>I.id===n);S&&(M(I=>I.map(ee=>ee.id===n?{...ee,connected:!1,email:void 0}:ee)),f({title:"연결 해제됨",description:`${S.name} 연결이 해제되었습니다.`}))},F=async n=>{const S=A.find(I=>I.id===n);S&&(f({title:"동기화 시작",description:`${S.name} 동기화를 시작합니다...`}),setTimeout(()=>{M(I=>I.map(ee=>ee.id===n?{...ee,lastSync:new Date().toLocaleString()}:ee)),f({title:"동기화 완료",description:`${S.name} 동기화가 완료되었습니다.`})},3e3))},m=n=>{switch(n){case"google_drive":return"🔷";case"dropbox":return"📦";case"onedrive":return"☁️";default:return"📁"}},d=n=>{switch(n){case"synced":return e.jsx(Us,{className:"h-4 w-4 text-green-600"});case"syncing":return e.jsx(vs,{className:"h-4 w-4 text-blue-600 animate-spin"});case"error":return e.jsx(bs,{className:"h-4 w-4 text-red-600"});case"pending":return e.jsx(Fe,{className:"h-4 w-4 text-yellow-600"});default:return null}};return e.jsx("div",{className:"space-y-6",children:e.jsxs($e,{defaultValue:"services",className:"space-y-4",children:[e.jsxs(Ue,{children:[e.jsx(Y,{value:"services",children:"연결된 스토리지"}),e.jsx(Y,{value:"files",children:"동기화 파일"}),e.jsx(Y,{value:"settings",children:"설정"})]}),e.jsx(G,{value:"services",className:"space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:A.map(n=>e.jsxs(g,{children:[e.jsx(T,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:m(n.type)}),e.jsx(E,{className:"text-lg",children:n.name})]}),n.connected&&e.jsx(L,{className:"bg-green-500",children:"연결됨"})]})}),e.jsx(N,{className:"space-y-4",children:n.connected?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"계정:"}),e.jsx("span",{className:"font-medium",children:n.email})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"마지막 동기화:"}),e.jsx("span",{className:"font-medium",children:n.lastSync||"없음"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"자동 동기화:"}),e.jsx(L,{variant:n.settings.autoSync?"default":"secondary",children:n.settings.autoSync?"켜짐":"꺼짐"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(c,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>F(n.id),children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),"동기화"]}),e.jsxs(c,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>$(n),children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"설정"]})]}),e.jsx(c,{size:"sm",variant:"destructive",className:"w-full",onClick:()=>k(n.id),children:"연결 해제"})]}):e.jsxs(c,{className:"w-full",onClick:()=>o(n.id),children:[e.jsx(Qs,{className:"h-4 w-4 mr-2"}),n.name," 연결"]})})]},n.id))})}),e.jsx(G,{value:"files",className:"space-y-4",children:e.jsxs(g,{children:[e.jsx(T,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(E,{children:"동기화된 파일"}),e.jsxs(c,{size:"sm",variant:"outline",children:[e.jsx(vs,{className:"h-4 w-4 mr-2"}),"전체 동기화"]})]})}),e.jsx(N,{children:e.jsxs(ls,{children:[e.jsx(ns,{children:e.jsxs(Ce,{children:[e.jsx(ie,{children:"파일명"}),e.jsx(ie,{children:"서비스"}),e.jsx(ie,{children:"크기"}),e.jsx(ie,{children:"마지막 동기화"}),e.jsx(ie,{children:"상태"}),e.jsx(ie,{className:"text-right",children:"작업"})]})}),e.jsx(rs,{children:y.map(n=>e.jsxs(Ce,{children:[e.jsx(Q,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Le,{className:"h-4 w-4 text-muted-foreground"}),n.name]})}),e.jsx(Q,{children:n.service}),e.jsx(Q,{className:"text-sm text-muted-foreground",children:n.size}),e.jsx(Q,{className:"text-sm text-muted-foreground",children:n.lastSync}),e.jsx(Q,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[d(n.status),e.jsxs("span",{className:"text-sm",children:[n.status==="synced"&&"동기화됨",n.status==="syncing"&&"동기화 중",n.status==="error"&&"오류",n.status==="pending"&&"대기 중"]})]})}),e.jsx(Q,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(c,{size:"sm",variant:"ghost",children:e.jsx(is,{className:"h-4 w-4"})}),e.jsx(c,{size:"sm",variant:"ghost",children:e.jsx(qs,{className:"h-4 w-4"})})]})})]},n.id))})]})})]})}),e.jsx(G,{value:"settings",className:"space-y-4",children:e.jsxs(g,{children:[e.jsx(T,{children:e.jsx(E,{children:"전역 설정"})}),e.jsxs(N,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:"동기화 규칙"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(D,{children:"서명 완료된 문서만 동기화"}),e.jsx(ke,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(D,{children:"블록체인 검증된 문서만 동기화"}),e.jsx(ke,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(D,{children:"템플릿 동기화"}),e.jsx(ke,{})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:"파일 구조"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{children:"폴더 구조 형식"}),e.jsxs(Ne,{defaultValue:"year-month",children:[e.jsx(ve,{children:e.jsx(ye,{})}),e.jsxs(be,{children:[e.jsx(B,{value:"year-month",children:"/년도/월/파일명"}),e.jsx(B,{value:"category",children:"/카테고리/파일명"}),e.jsx(B,{value:"client",children:"/고객명/파일명"}),e.jsx(B,{value:"flat",children:"단일 폴더"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:"보안"}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ye,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-yellow-900",children:"주의사항"}),e.jsx("p",{className:"text-yellow-700",children:"클라우드 스토리지에 저장된 문서는 해당 서비스의 보안 정책을 따릅니다. 민감한 문서는 암호화 옵션을 활성화하는 것을 권장합니다."})]})]})})]}),e.jsx("div",{className:"pt-4 border-t",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(c,{variant:"outline",className:"flex-1",children:[e.jsx(is,{className:"h-4 w-4 mr-2"}),"전체 백업"]}),e.jsxs(c,{variant:"outline",className:"flex-1",children:[e.jsx(ze,{className:"h-4 w-4 mr-2"}),"복원"]})]})})]})]})})]})})}function Ua(){const{toast:f}=fs(),[A,M]=b.useState(null),[y,K]=b.useState({enableQRCode:!0,enableSMS:!0,enableEmail:!0,enableKakaoTalk:!1,autoSwitchMobile:!0,mobileTheme:"auto",touchSensitivity:"medium",signatureQuality:"high"}),$="https://sign.signchain.io/s/abc123def456",o=[{device:"모바일",count:324,percentage:65,icon:Ie},{device:"데스크톱",count:126,percentage:25,icon:Fs},{device:"태블릿",count:50,percentage:10,icon:Os}],k=[{id:"1",signer:"김철수",device:"iPhone 14 Pro",os:"iOS 17.2",signedAt:"2024-01-22 14:30",status:"completed"},{id:"2",signer:"이영희",device:"Galaxy S23",os:"Android 14",signedAt:"2024-01-22 13:45",status:"completed"},{id:"3",signer:"박민수",device:"iPad Pro",os:"iPadOS 17.2",signedAt:"2024-01-22 12:20",status:"completed"}],F=(n,S)=>{navigator.clipboard.writeText(n),M(S),setTimeout(()=>M(null),2e3),f({title:"복사됨",description:`${S}이(가) 클립보드에 복사되었습니다.`})},m=n=>{f({title:"전송 중",description:`${n}(으)로 서명 링크를 전송하고 있습니다...`})},d=(n,S)=>{K(I=>({...I,[n]:S})),f({title:"설정 저장됨",description:"모바일 서명 설정이 업데이트되었습니다."})};return e.jsx("div",{className:"space-y-6",children:e.jsxs($e,{defaultValue:"overview",className:"space-y-4",children:[e.jsxs(Ue,{children:[e.jsx(Y,{value:"overview",children:"개요"}),e.jsx(Y,{value:"sharing",children:"공유 옵션"}),e.jsx(Y,{value:"settings",children:"모바일 설정"}),e.jsx(Y,{value:"responsive",children:"반응형 테스트"})]}),e.jsxs(G,{value:"overview",className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:o.map(n=>e.jsxs(g,{children:[e.jsxs(T,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsxs(E,{className:"text-sm font-medium",children:[n.device," 서명"]}),e.jsx(n.icon,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(N,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[n.count,"건"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary h-2 rounded-full",style:{width:`${n.percentage}%`}})}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[n.percentage,"%"]})]})]})]},n.device))}),e.jsxs(g,{children:[e.jsx(T,{children:e.jsx(E,{children:"최근 모바일 서명"})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-4",children:k.map(n=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Ie,{className:"h-8 w-8 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:n.signer}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.device," • ",n.os]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(L,{className:"bg-green-500",children:"완료"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:n.signedAt})]})]},n.id))})})]}),e.jsxs(g,{children:[e.jsx(T,{children:e.jsx(E,{children:"모바일 서명 기능"})}),e.jsx(N,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-100 flex items-center justify-center",children:e.jsx(Ie,{className:"h-4 w-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"터치 최적화"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"손가락으로 쉽게 서명할 수 있는 큰 터치 영역"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-100 flex items-center justify-center",children:e.jsx(Ns,{className:"h-4 w-4 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"QR 코드 지원"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"PC에서 QR 스캔으로 모바일 서명 시작"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-100 flex items-center justify-center",children:e.jsx(Be,{className:"h-4 w-4 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"반응형 디자인"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"모든 화면 크기에 자동으로 최적화"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-100 flex items-center justify-center",children:e.jsx(ds,{className:"h-4 w-4 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"다양한 전송 방법"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"SMS, 이메일, 카카오톡으로 링크 전송"})]})]})]})})]})]}),e.jsxs(G,{value:"sharing",className:"space-y-4",children:[e.jsxs(g,{children:[e.jsx(T,{children:e.jsx(E,{children:"QR 코드"})}),e.jsx(N,{children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg flex items-center justify-center max-w-[200px]",children:e.jsx(Ns,{className:"h-32 w-32 text-gray-400"})}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"모바일 기기로 스캔하여 서명 시작"})]}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx(D,{children:"서명 링크"}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx(ne,{value:$,readOnly:!0}),e.jsx(c,{size:"icon",variant:"outline",onClick:()=>F($,"링크"),children:A==="링크"?e.jsx(Us,{className:"h-4 w-4"}):e.jsx($s,{className:"h-4 w-4"})})]})]}),e.jsxs(c,{className:"w-full",children:[e.jsx(Ns,{className:"h-4 w-4 mr-2"}),"QR 코드 다운로드"]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(g,{children:[e.jsx(T,{children:e.jsx(E,{className:"text-base",children:"SMS 전송"})}),e.jsxs(N,{className:"space-y-3",children:[e.jsx(ne,{placeholder:"010-1234-5678"}),e.jsx(He,{placeholder:"메시지 내용",defaultValue:"SignChain 전자계약서 서명 요청입니다. 아래 링크를 클릭하여 서명해주세요.",rows:3}),e.jsxs(c,{className:"w-full",onClick:()=>m("SMS"),disabled:!y.enableSMS,children:[e.jsx(ds,{className:"h-4 w-4 mr-2"}),"SMS 전송"]})]})]}),e.jsxs(g,{children:[e.jsx(T,{children:e.jsx(E,{className:"text-base",children:"이메일 전송"})}),e.jsxs(N,{className:"space-y-3",children:[e.jsx(ne,{placeholder:"email@example.com",type:"email"}),e.jsx(ne,{placeholder:"제목",defaultValue:"[SignChain] 전자계약서 서명 요청"}),e.jsxs(c,{className:"w-full",onClick:()=>m("이메일"),disabled:!y.enableEmail,children:[e.jsx(Ve,{className:"h-4 w-4 mr-2"}),"이메일 전송"]})]})]}),e.jsxs(g,{children:[e.jsx(T,{children:e.jsx(E,{className:"text-base",children:"카카오톡 전송"})}),e.jsxs(N,{className:"space-y-3",children:[e.jsx("div",{className:"bg-yellow-50 p-3 rounded-lg",children:e.jsx("p",{className:"text-sm text-yellow-900",children:"카카오톡 알림톡 서비스 연동이 필요합니다"})}),e.jsxs(c,{className:"w-full",onClick:()=>m("카카오톡"),disabled:!y.enableKakaoTalk,children:[e.jsx(ds,{className:"h-4 w-4 mr-2"}),"카카오톡 전송"]})]})]})]})]}),e.jsx(G,{value:"settings",className:"space-y-4",children:e.jsxs(g,{children:[e.jsx(T,{children:e.jsx(E,{children:"모바일 서명 설정"})}),e.jsxs(N,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:"공유 옵션"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(D,{children:"QR 코드 생성"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"서명 링크에 대한 QR 코드 자동 생성"})]}),e.jsx(ke,{checked:y.enableQRCode,onCheckedChange:n=>d("enableQRCode",n)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(D,{children:"SMS 전송"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"문자 메시지로 서명 링크 전송"})]}),e.jsx(ke,{checked:y.enableSMS,onCheckedChange:n=>d("enableSMS",n)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(D,{children:"이메일 전송"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"이메일로 서명 링크 전송"})]}),e.jsx(ke,{checked:y.enableEmail,onCheckedChange:n=>d("enableEmail",n)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(D,{children:"카카오톡 알림톡"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"카카오톡으로 서명 링크 전송"})]}),e.jsx(ke,{checked:y.enableKakaoTalk,onCheckedChange:n=>d("enableKakaoTalk",n)})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:"모바일 경험"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(D,{children:"자동 모바일 전환"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"모바일 기기 감지 시 자동으로 모바일 UI 표시"})]}),e.jsx(ke,{checked:y.autoSwitchMobile,onCheckedChange:n=>d("autoSwitchMobile",n)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{children:"모바일 테마"}),e.jsxs(Ne,{value:y.mobileTheme,onValueChange:n=>d("mobileTheme",n),children:[e.jsx(ve,{children:e.jsx(ye,{})}),e.jsxs(be,{children:[e.jsx(B,{value:"light",children:"라이트"}),e.jsx(B,{value:"dark",children:"다크"}),e.jsx(B,{value:"auto",children:"자동 (시스템 설정)"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{children:"터치 감도"}),e.jsxs(Ne,{value:y.touchSensitivity,onValueChange:n=>d("touchSensitivity",n),children:[e.jsx(ve,{children:e.jsx(ye,{})}),e.jsxs(be,{children:[e.jsx(B,{value:"low",children:"낮음"}),e.jsx(B,{value:"medium",children:"보통"}),e.jsx(B,{value:"high",children:"높음"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{children:"서명 품질"}),e.jsxs(Ne,{value:y.signatureQuality,onValueChange:n=>d("signatureQuality",n),children:[e.jsx(ve,{children:e.jsx(ye,{})}),e.jsxs(be,{children:[e.jsx(B,{value:"standard",children:"표준"}),e.jsx(B,{value:"high",children:"고품질"})]})]})]})]})]})]})]})}),e.jsx(G,{value:"responsive",className:"space-y-4",children:e.jsxs(g,{children:[e.jsx(T,{children:e.jsx(E,{children:"반응형 미리보기"})}),e.jsxs(N,{children:[e.jsxs($e,{defaultValue:"mobile",className:"w-full",children:[e.jsxs(Ue,{className:"grid w-full grid-cols-3",children:[e.jsxs(Y,{value:"mobile",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),"모바일"]}),e.jsxs(Y,{value:"tablet",children:[e.jsx(Os,{className:"h-4 w-4 mr-2"}),"태블릿"]}),e.jsxs(Y,{value:"desktop",children:[e.jsx(Fs,{className:"h-4 w-4 mr-2"}),"데스크톱"]})]}),e.jsx(G,{value:"mobile",children:e.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50",children:[e.jsx("div",{className:"mx-auto",style:{maxWidth:"375px"},children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4 space-y-4",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-3/4"})]}),e.jsx("div",{className:"h-32 bg-gray-200 rounded animate-pulse"}),e.jsx(c,{className:"w-full",children:"모바일 서명 시작"})]})}),e.jsx("p",{className:"text-center text-sm text-muted-foreground mt-4",children:"375 x 812 (iPhone 13)"})]})}),e.jsx(G,{value:"tablet",children:e.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50",children:[e.jsx("div",{className:"mx-auto",style:{maxWidth:"768px"},children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 space-y-6",children:[e.jsx("div",{className:"h-10 bg-gray-200 rounded animate-pulse"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-3/4"})]}),e.jsx("div",{className:"h-24 bg-gray-200 rounded animate-pulse"})]}),e.jsx(c,{className:"w-full md:w-auto",children:"태블릿 서명 시작"})]})}),e.jsx("p",{className:"text-center text-sm text-muted-foreground mt-4",children:"768 x 1024 (iPad)"})]})}),e.jsx(G,{value:"desktop",children:e.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 space-y-6",children:[e.jsx("div",{className:"h-12 bg-gray-200 rounded animate-pulse max-w-md"}),e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-3/4"})]}),e.jsx("div",{className:"col-span-2 h-32 bg-gray-200 rounded animate-pulse"})]}),e.jsx(c,{children:"데스크톱 서명 시작"})]}),e.jsx("p",{className:"text-center text-sm text-muted-foreground mt-4",children:"1920 x 1080 (Full HD)"})]})})]}),e.jsx("div",{className:"mt-4 bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ye,{className:"h-4 w-4 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-blue-900",children:"테스트 팁"}),e.jsx("p",{className:"text-blue-700",children:"실제 기기에서 테스트하려면 QR 코드를 스캔하거나 링크를 전송하세요. Chrome DevTools의 디바이스 에뮬레이션도 활용할 수 있습니다."})]})]})})]})]})})]})})}function Va(){const{toast:f}=fs(),[A,M]=b.useState([{id:"1",type:"email",name:"이메일 (SendGrid)",enabled:!0,config:{provider:"sendgrid",apiKey:"sg_xxxxx",fromEmail:"noreply@signchain.io",fromName:"SignChain"}},{id:"2",type:"sms",name:"SMS (Twilio)",enabled:!0,config:{provider:"twilio",accountSid:"AC_xxxxx",authToken:"xxxxx",fromNumber:"+821012345678"}},{id:"3",type:"kakao",name:"카카오톡 알림톡",enabled:!1,config:{provider:"kakao",apiKey:"",templateCode:""}},{id:"4",type:"slack",name:"Slack",enabled:!0,config:{webhookUrl:"https://hooks.slack.com/services/xxx"}}]),[y,K]=b.useState([{id:"1",name:"서명 요청 이메일",channel:"email",event:"signature_requested",subject:"[SignChain] {{document_title}} 서명 요청",content:`안녕하세요 {{signer_name}}님,

{{sender_name}}님이 '{{document_title}}' 문서에 서명을 요청했습니다.

서명하기: {{signature_link}}

감사합니다.`,variables:["signer_name","sender_name","document_title","signature_link"]},{id:"2",name:"서명 완료 SMS",channel:"sms",event:"signature_completed",content:"[SignChain] {{signer_name}}님이 {{document_title}} 문서에 서명을 완료했습니다.",variables:["signer_name","document_title"]}]),[$]=b.useState([{id:"signature_requested",name:"서명 요청됨",description:"새로운 서명 요청이 발송될 때",variables:["signer_name","sender_name","document_title","signature_link","expires_at"],enabled:!0},{id:"signature_completed",name:"서명 완료",description:"서명이 완료되었을 때",variables:["signer_name","document_title","signed_at"],enabled:!0},{id:"signature_rejected",name:"서명 거절",description:"서명이 거절되었을 때",variables:["signer_name","document_title","reason"],enabled:!0},{id:"document_expired",name:"문서 만료",description:"서명 기한이 만료되었을 때",variables:["document_title","expired_at"],enabled:!0},{id:"reminder_sent",name:"리마인더 발송",description:"서명 리마인더가 발송될 때",variables:["signer_name","document_title","signature_link"],enabled:!0}]),[o,k]=b.useState(null),[F,m]=b.useState(""),d=async i=>{if(!F){f({title:"수신자 필요",description:"테스트 수신자를 입력해주세요.",variant:"destructive"});return}f({title:"테스트 발송 중",description:"알림을 발송하고 있습니다..."}),setTimeout(()=>{f({title:"테스트 발송 완료",description:`${F}(으)로 테스트 알림이 발송되었습니다.`})},2e3)},n=i=>{K(o?t=>t.map(_=>_.id===i.id?i:_):t=>[...t,{...i,id:Date.now().toString()}]),k(null),f({title:"템플릿 저장됨",description:"알림 템플릿이 저장되었습니다."})},S=i=>{K(t=>t.filter(_=>_.id!==i)),f({title:"템플릿 삭제됨",description:"알림 템플릿이 삭제되었습니다."})},I=i=>{switch(i){case"email":return e.jsx(Ve,{className:"h-4 w-4"});case"sms":return e.jsx(Ie,{className:"h-4 w-4"});case"kakao":return e.jsx(ds,{className:"h-4 w-4"});case"slack":return e.jsx(Rs,{className:"h-4 w-4"});case"teams":return e.jsx(ca,{className:"h-4 w-4"});default:return e.jsx(Ls,{className:"h-4 w-4"})}},ee=i=>{switch(i){case"email":return"bg-blue-100 text-blue-600";case"sms":return"bg-green-100 text-green-600";case"kakao":return"bg-yellow-100 text-yellow-600";case"slack":return"bg-purple-100 text-purple-600";case"teams":return"bg-indigo-100 text-indigo-600";default:return"bg-gray-100 text-gray-600"}};return e.jsx("div",{className:"space-y-6",children:e.jsxs($e,{defaultValue:"channels",className:"space-y-4",children:[e.jsxs(Ue,{children:[e.jsx(Y,{value:"channels",children:"알림 채널"}),e.jsx(Y,{value:"templates",children:"템플릿 관리"}),e.jsx(Y,{value:"events",children:"이벤트 설정"}),e.jsx(Y,{value:"test",children:"테스트"})]}),e.jsx(G,{value:"channels",className:"space-y-4",children:e.jsxs(g,{children:[e.jsx(T,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(E,{children:"알림 채널 설정"}),e.jsxs(c,{size:"sm",children:[e.jsx(Ze,{className:"h-4 w-4 mr-2"}),"채널 추가"]})]})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-4",children:A.map(i=>e.jsx(g,{children:e.jsxs(N,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${ee(i.type)}`,children:I(i.type)}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:i.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:i.config.provider||i.type})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ke,{checked:i.enabled,onCheckedChange:t=>{M(_=>_.map(R=>R.id===i.id?{...R,enabled:t}:R))}}),e.jsx(c,{size:"sm",variant:"ghost",children:e.jsx(Be,{className:"h-4 w-4"})})]})]}),i.enabled&&e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4 text-sm",children:[i.type==="email"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"발신 이메일:"}),e.jsx("p",{className:"font-medium",children:i.config.fromEmail})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"발신자명:"}),e.jsx("p",{className:"font-medium",children:i.config.fromName})]})]}),i.type==="sms"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"발신 번호:"}),e.jsx("p",{className:"font-medium",children:i.config.fromNumber})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Provider:"}),e.jsx("p",{className:"font-medium",children:i.config.provider})]})]}),i.type==="slack"&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Webhook URL:"}),e.jsx("p",{className:"font-medium text-xs break-all",children:i.config.webhookUrl})]})]})]})},i.id))})})]})}),e.jsxs(G,{value:"templates",className:"space-y-4",children:[e.jsxs(g,{children:[e.jsx(T,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(E,{children:"알림 템플릿"}),e.jsxs(c,{size:"sm",onClick:()=>k({id:"",name:"",channel:"email",event:"signature_requested",subject:"",content:"",variables:[]}),children:[e.jsx(Ze,{className:"h-4 w-4 mr-2"}),"템플릿 추가"]})]})}),e.jsx(N,{children:e.jsxs(ls,{children:[e.jsx(ns,{children:e.jsxs(Ce,{children:[e.jsx(ie,{children:"템플릿명"}),e.jsx(ie,{children:"채널"}),e.jsx(ie,{children:"이벤트"}),e.jsx(ie,{children:"변수"}),e.jsx(ie,{className:"text-right",children:"작업"})]})}),e.jsx(rs,{children:y.map(i=>{var t;return e.jsxs(Ce,{children:[e.jsx(Q,{className:"font-medium",children:i.name}),e.jsx(Q,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[I(i.channel),e.jsx("span",{className:"text-sm",children:i.channel})]})}),e.jsx(Q,{children:e.jsx(L,{variant:"outline",children:(t=$.find(_=>_.id===i.event))==null?void 0:t.name})}),e.jsx(Q,{children:e.jsxs("div",{className:"flex gap-1 flex-wrap",children:[i.variables.slice(0,3).map(_=>e.jsx(L,{variant:"secondary",className:"text-xs",children:_},_)),i.variables.length>3&&e.jsxs(L,{variant:"secondary",className:"text-xs",children:["+",i.variables.length-3]})]})}),e.jsx(Q,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(c,{size:"sm",variant:"ghost",onClick:()=>k(i),children:e.jsx(Sa,{className:"h-4 w-4"})}),e.jsx(c,{size:"sm",variant:"ghost",onClick:()=>S(i.id),children:e.jsx(_s,{className:"h-4 w-4"})})]})})]},i.id)})})]})})]}),o&&e.jsxs(g,{children:[e.jsx(T,{children:e.jsx(E,{children:o.id?"템플릿 수정":"새 템플릿"})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{children:"템플릿명"}),e.jsx(ne,{value:o.name,onChange:i=>k({...o,name:i.target.value}),placeholder:"예: 서명 요청 이메일"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{children:"채널"}),e.jsxs(Ne,{value:o.channel,onValueChange:i=>k({...o,channel:i}),children:[e.jsx(ve,{children:e.jsx(ye,{})}),e.jsx(be,{children:A.map(i=>e.jsx(B,{value:i.type,children:i.name},i.id))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{children:"이벤트"}),e.jsxs(Ne,{value:o.event,onValueChange:i=>{const t=$.find(_=>_.id===i);k({...o,event:i,variables:(t==null?void 0:t.variables)||[]})},children:[e.jsx(ve,{children:e.jsx(ye,{})}),e.jsx(be,{children:$.map(i=>e.jsx(B,{value:i.id,children:i.name},i.id))})]})]}),o.channel==="email"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{children:"제목"}),e.jsx(ne,{value:o.subject,onChange:i=>k({...o,subject:i.target.value}),placeholder:"예: [SignChain] {{document_title}} 서명 요청"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{children:"내용"}),e.jsx(He,{value:o.content,onChange:i=>k({...o,content:i.target.value}),rows:5,placeholder:"사용 가능한 변수를 {{}} 안에 넣어 사용하세요"}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"사용 가능한 변수:"}),o.variables.map(i=>e.jsx(L,{variant:"secondary",className:"text-xs cursor-pointer",onClick:()=>{const t=document.querySelector("textarea");if(t){const _=t.selectionStart,R=o.content,O=R.slice(0,_)+`{{${i}}}`+R.slice(_);k({...o,content:O})}},children:`{{${i}}}`},i))]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{variant:"outline",onClick:()=>k(null),children:"취소"}),e.jsx(c,{onClick:()=>n(o),children:"저장"})]})]})]})]}),e.jsxs(G,{value:"events",className:"space-y-4",children:[e.jsxs(g,{children:[e.jsx(T,{children:e.jsx(E,{children:"이벤트별 알림 설정"})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-4",children:$.map(i=>e.jsx(g,{children:e.jsx(N,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-medium",children:i.name}),e.jsx(ke,{defaultChecked:i.enabled})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:i.description}),e.jsx("div",{className:"flex gap-2 flex-wrap mt-2",children:i.variables.map(t=>e.jsx(L,{variant:"outline",className:"text-xs",children:t},t))})]}),e.jsx(c,{size:"sm",variant:"outline",children:"설정"})]})})},i.id))})})]}),e.jsxs(g,{children:[e.jsx(T,{children:e.jsx(E,{children:"알림 스케줄"})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(D,{children:"서명 리마인더"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"미서명 문서에 대한 자동 리마인더 발송"})]}),e.jsx(ke,{defaultChecked:!0})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{children:"첫 번째 리마인더"}),e.jsxs(Ne,{defaultValue:"24",children:[e.jsx(ve,{children:e.jsx(ye,{})}),e.jsxs(be,{children:[e.jsx(B,{value:"12",children:"12시간 후"}),e.jsx(B,{value:"24",children:"24시간 후"}),e.jsx(B,{value:"48",children:"48시간 후"}),e.jsx(B,{value:"72",children:"72시간 후"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{children:"두 번째 리마인더"}),e.jsxs(Ne,{defaultValue:"72",children:[e.jsx(ve,{children:e.jsx(ye,{})}),e.jsxs(be,{children:[e.jsx(B,{value:"48",children:"48시간 후"}),e.jsx(B,{value:"72",children:"72시간 후"}),e.jsx(B,{value:"96",children:"96시간 후"}),e.jsx(B,{value:"120",children:"120시간 후"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{children:"최대 리마인더 횟수"}),e.jsxs(Ne,{defaultValue:"3",children:[e.jsx(ve,{children:e.jsx(ye,{})}),e.jsxs(be,{children:[e.jsx(B,{value:"1",children:"1회"}),e.jsx(B,{value:"2",children:"2회"}),e.jsx(B,{value:"3",children:"3회"}),e.jsx(B,{value:"5",children:"5회"})]})]})]})]})]})]})]}),e.jsxs(G,{value:"test",className:"space-y-4",children:[e.jsxs(g,{children:[e.jsx(T,{children:e.jsx(E,{children:"알림 테스트"})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{children:"테스트 수신자"}),e.jsx(ne,{placeholder:"이메일 또는 전화번호",value:F,onChange:i=>m(i.target.value)})]}),e.jsx("div",{className:"space-y-3",children:y.map(i=>{var _;const t=A.find(R=>R.type===i.channel);return e.jsx(g,{children:e.jsx(N,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${ee(i.channel)}`,children:I(i.channel)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:i.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[t==null?void 0:t.name," • ",(_=$.find(R=>R.id===i.event))==null?void 0:_.name]})]})]}),e.jsxs(c,{size:"sm",onClick:()=>d(i.id),children:[e.jsx(Je,{className:"h-4 w-4 mr-2"}),"테스트 발송"]})]})})},i.id)})}),e.jsx(g,{className:"bg-blue-50 border-blue-200",children:e.jsx(N,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ye,{className:"h-4 w-4 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-blue-900",children:"테스트 모드"}),e.jsx("p",{className:"text-blue-700",children:"테스트 발송은 실제 템플릿을 사용하지만 테스트 데이터로 변수가 치환됩니다."})]})]})})})]})]}),e.jsxs(g,{children:[e.jsx(T,{children:e.jsx(E,{children:"최근 알림 로그"})}),e.jsx(N,{children:e.jsxs(ls,{children:[e.jsx(ns,{children:e.jsxs(Ce,{children:[e.jsx(ie,{children:"시간"}),e.jsx(ie,{children:"채널"}),e.jsx(ie,{children:"수신자"}),e.jsx(ie,{children:"템플릿"}),e.jsx(ie,{children:"상태"})]})}),e.jsxs(rs,{children:[e.jsxs(Ce,{children:[e.jsx(Q,{className:"text-sm",children:"2024-01-22 15:30"}),e.jsx(Q,{children:e.jsx(Ve,{className:"h-4 w-4"})}),e.jsx(Q,{className:"text-sm",children:"test@example.com"}),e.jsx(Q,{className:"text-sm",children:"서명 요청 이메일"}),e.jsx(Q,{children:e.jsx(L,{className:"bg-green-500",children:"성공"})})]}),e.jsxs(Ce,{children:[e.jsx(Q,{className:"text-sm",children:"2024-01-22 15:25"}),e.jsx(Q,{children:e.jsx(Ie,{className:"h-4 w-4"})}),e.jsx(Q,{className:"text-sm",children:"010-1234-5678"}),e.jsx(Q,{className:"text-sm",children:"서명 완료 SMS"}),e.jsx(Q,{children:e.jsx(L,{className:"bg-green-500",children:"성공"})})]}),e.jsxs(Ce,{children:[e.jsx(Q,{className:"text-sm",children:"2024-01-22 15:20"}),e.jsx(Q,{children:e.jsx(Rs,{className:"h-4 w-4"})}),e.jsx(Q,{className:"text-sm",children:"#general"}),e.jsx(Q,{className:"text-sm",children:"Slack 알림"}),e.jsx(Q,{children:e.jsx(L,{variant:"destructive",children:"실패"})})]})]})]})})]})]})]})})}function Mt(){const{user:f}=Gs(),{toast:A}=fs(),[M,y]=b.useState(null),[K,$]=b.useState(!1),[o,k]=b.useState("overview"),[F,m]=b.useState(!1),[d,n]=b.useState(null),[S,I]=b.useState(!1),[ee,i]=b.useState(!1),[t,_]=b.useState({title:"",description:"",organizationId:""}),[R,O]=b.useState({signerEmail:"",signerName:"",ccEmails:"",message:""}),[x,h]=b.useState([{id:"1",title:"서비스 이용 계약서",description:"2024년 연간 서비스 이용 계약",fileName:"service_contract_2024.pdf",fileHash:"0x1234...abcd",uploadedAt:"2024-01-15T10:30:00",status:"partially_signed",signers:[{email:(f==null?void 0:f.email)||"",name:"김철수",signed:!0,signedAt:"2024-01-15T14:00:00"},{email:"partner@company.com",name:"이영희",signed:!1}],ccRecipients:["legal@company.com"],blockchainTxHash:"0xabc123..."},{id:"2",title:"비밀유지계약서(NDA)",description:"프로젝트 X 관련 NDA",fileName:"nda_project_x.pdf",fileHash:"0x5678...efgh",uploadedAt:"2024-01-10T09:00:00",status:"completed",signers:[{email:(f==null?void 0:f.email)||"",name:"김철수",signed:!0,signedAt:"2024-01-10T10:00:00"},{email:"vendor@external.com",name:"박민수",signed:!0,signedAt:"2024-01-11T15:30:00"}],blockchainTxHash:"0xdef456..."}]),j={totalContracts:x.length,completed:x.filter(l=>l.status==="completed").length,pending:x.filter(l=>l.status==="pending_signature"||l.status==="partially_signed").length,thisMonth:x.filter(l=>{const w=new Date(l.uploadedAt),U=new Date;return w.getMonth()===U.getMonth()&&w.getFullYear()===U.getFullYear()}).length},p=l=>{var U;const w=(U=l.target.files)==null?void 0:U[0];w&&y(w)},s=async()=>{if(!M||!t.title){A({title:"입력 오류",description:"계약서 제목과 파일을 선택해주세요.",variant:"destructive"});return}$(!0);try{A({title:"IPFS 업로드 중",description:"계약서를 분산 저장소에 업로드하고 있습니다..."});const l=new FormData;l.append("file",M);const w=await fetch("/api/v1/ipfs/upload",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:l});if(!w.ok)throw new Error("IPFS 업로드 실패");const U=await w.json();if(!U.success)throw new Error(U.message||"IPFS 업로드 실패");A({title:"블록체인 등록 중",description:"계약 정보를 블록체인에 등록하고 있습니다..."});const pe={title:t.title,description:t.description,fileName:M.name,mimeType:M.type,size:M.size,ipfsHash:U.data.ipfsHash,ipfsGatewayUrl:U.data.ipfsGatewayUrl,checksum:U.data.checksum,category:"contract"},P=await fetch("/api/v1/files",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(pe)});let ae=null;P.ok&&(ae=(await P.json()).data);const z={id:Date.now().toString(),title:t.title,description:t.description,fileName:M.name,fileHash:U.data.ipfsHash,ipfsHash:U.data.ipfsHash,ipfsGatewayUrl:U.data.ipfsGatewayUrl,checksum:U.data.checksum,uploadedAt:new Date().toISOString(),status:"uploaded",signers:[],blockchainTxHash:`0x${Math.random().toString(16).substr(2,8)}...`,fileId:ae==null?void 0:ae.id};h([z,...x]),A({title:"업로드 성공",description:`계약서가 IPFS(${U.data.ipfsHash.substring(0,8)}...)에 저장되고 블록체인에 등록되었습니다.`}),_({title:"",description:"",organizationId:""}),y(null),k("manage")}catch(l){console.error("Contract upload error:",l),A({title:"업로드 실패",description:l instanceof Error?l.message:"계약서 업로드 중 오류가 발생했습니다.",variant:"destructive"})}finally{$(!1)}},a=async()=>{if(!R.signerEmail||!d){A({title:"입력 오류",description:"서명자 이메일을 입력해주세요.",variant:"destructive"});return}try{await new Promise(w=>setTimeout(w,1e3));const l={...d,status:"pending_signature",signers:[...d.signers,{email:R.signerEmail,name:R.signerName,signed:!1}],ccRecipients:R.ccEmails?R.ccEmails.split(",").map(w=>w.trim()):[]};h(x.map(w=>w.id===d.id?l:w)),A({title:"서명 요청 발송",description:`${R.signerEmail}로 서명 요청을 발송했습니다.`}),m(!1),O({signerEmail:"",signerName:"",ccEmails:"",message:""})}catch{A({title:"발송 실패",description:"서명 요청 발송 중 오류가 발생했습니다.",variant:"destructive"})}},r=l=>{switch(l){case"uploaded":return e.jsxs(L,{variant:"secondary",children:[e.jsx(ze,{className:"w-3 h-3 mr-1"}),"업로드됨"]});case"pending_signature":return e.jsxs(L,{variant:"default",className:"bg-yellow-500",children:[e.jsx(Fe,{className:"w-3 h-3 mr-1"}),"서명 대기"]});case"partially_signed":return e.jsxs(L,{variant:"default",className:"bg-blue-500",children:[e.jsx(ps,{className:"w-3 h-3 mr-1"}),"일부 서명"]});case"completed":return e.jsxs(L,{variant:"default",className:"bg-green-500",children:[e.jsx(De,{className:"w-3 h-3 mr-1"}),"완료"]})}},v=l=>l.signers.length===0?0:l.signers.filter(U=>U.signed).length/l.signers.length*100,u={contractId:"1",title:"서비스 이용 계약서",status:"signing",createdAt:"2024-01-15T10:30:00",expiresAt:"2024-02-15T23:59:59",documentHash:"0x1234567890abcdef",blockchainTxHash:"0xabc123def456",signers:[{id:"1",email:"kim@example.com",name:"김철수",role:"구매자",status:"signed",signedAt:"2024-01-15T14:00:00",viewedAt:"2024-01-15T13:30:00",ipAddress:"123.456.789.0",device:"Chrome on Windows"},{id:"2",email:"lee@company.com",name:"이영희",role:"판매자",status:"viewed",viewedAt:"2024-01-16T10:00:00",ipAddress:"987.654.321.0",device:"Safari on Mac"}],timeline:[{id:"1",action:"계약서 생성",actor:"김철수",timestamp:"2024-01-15T10:30:00",details:"서비스 이용 계약서를 생성했습니다"},{id:"2",action:"서명 요청 발송",actor:"시스템",timestamp:"2024-01-15T10:35:00",details:"2명의 서명자에게 이메일이 발송되었습니다"},{id:"3",action:"문서 열람",actor:"김철수",timestamp:"2024-01-15T13:30:00",ipAddress:"123.456.789.0"},{id:"4",action:"서명 완료",actor:"김철수",timestamp:"2024-01-15T14:00:00",ipAddress:"123.456.789.0"}],reminders:[{sentAt:"2024-01-17T09:00:00",sentTo:["lee@company.com"],type:"auto"}]};return S?e.jsxs("div",{className:"container mx-auto py-4",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"문서 편집기"}),e.jsxs(c,{variant:"outline",onClick:()=>I(!1),children:[e.jsx(bs,{className:"w-4 h-4 mr-2"}),"닫기"]})]}),e.jsx(Ma,{documentUrl:"/mock-document.pdf",onSave:(l,w)=>{console.log("Saved:",{signers:l,fields:w}),I(!1),A({title:"저장 완료",description:"서명 필드가 성공적으로 설정되었습니다."})}})]}):ee?e.jsxs("div",{className:"container mx-auto py-8 px-4",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"계약서 추적"}),e.jsxs(c,{variant:"outline",onClick:()=>i(!1),children:[e.jsx(bs,{className:"w-4 h-4 mr-2"}),"목록으로"]})]}),e.jsx(Ra,{trackingData:u,onSendReminder:l=>{console.log("Send reminder to:",l),A({title:"리마인더 발송",description:"선택한 서명자에게 리마인더를 발송했습니다."})},onDownload:()=>{console.log("Download contract")},onView:()=>{console.log("View contract")}})]}):e.jsxs("div",{className:"container mx-auto py-8 px-4",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"계약 모듈"}),e.jsx("p",{className:"text-muted-foreground",children:"블록체인 기반 계약서 관리 및 전자서명"})]}),e.jsxs($e,{value:o,onValueChange:k,className:"space-y-4",children:[e.jsxs(Ue,{className:"grid w-full grid-cols-12 gap-1",children:[e.jsxs(Y,{value:"overview",children:[e.jsx(xa,{className:"w-4 h-4 mr-2"}),"대시보드"]}),e.jsxs(Y,{value:"upload",children:[e.jsx(ze,{className:"w-4 h-4 mr-2"}),"계약서 업로드"]}),e.jsxs(Y,{value:"templates",children:[e.jsx(Ds,{className:"w-4 h-4 mr-2"}),"템플릿"]}),e.jsxs(Y,{value:"bulk-send",children:[e.jsx(ps,{className:"w-4 h-4 mr-2"}),"대량 발송"]}),e.jsxs(Y,{value:"stamps",children:[e.jsx(qe,{className:"w-4 h-4 mr-2"}),"도장 관리"]}),e.jsxs(Y,{value:"auth",children:[e.jsx(Be,{className:"w-4 h-4 mr-2"}),"서명 인증"]}),e.jsxs(Y,{value:"version",children:[e.jsx(ts,{className:"w-4 h-4 mr-2"}),"버전 관리"]}),e.jsxs(Y,{value:"cloud",children:[e.jsx(ze,{className:"w-4 h-4 mr-2"}),"클라우드"]}),e.jsxs(Y,{value:"mobile",children:[e.jsx(Ie,{className:"w-4 h-4 mr-2"}),"모바일"]}),e.jsxs(Y,{value:"notifications",children:[e.jsx(Ls,{className:"w-4 h-4 mr-2"}),"알림"]}),e.jsxs(Y,{value:"manage",children:[e.jsx(Le,{className:"w-4 h-4 mr-2"}),"진행 중"]}),e.jsxs(Y,{value:"completed",children:[e.jsx(De,{className:"w-4 h-4 mr-2"}),"완료"]})]}),e.jsxs(G,{value:"overview",className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs(g,{children:[e.jsxs(T,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(E,{className:"text-sm font-medium",children:"전체 계약서"}),e.jsx(Le,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(N,{children:[e.jsx("div",{className:"text-2xl font-bold",children:j.totalContracts}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["이번 달 +",j.thisMonth]})]})]}),e.jsxs(g,{children:[e.jsxs(T,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(E,{className:"text-sm font-medium",children:"완료된 계약"}),e.jsx(De,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(N,{children:[e.jsx("div",{className:"text-2xl font-bold",children:j.completed}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["전체의 ",Math.round(j.completed/j.totalContracts*100),"%"]})]})]}),e.jsxs(g,{children:[e.jsxs(T,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(E,{className:"text-sm font-medium",children:"진행 중"}),e.jsx(Fe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(N,{children:[e.jsx("div",{className:"text-2xl font-bold",children:j.pending}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"서명 대기 중"})]})]}),e.jsxs(g,{children:[e.jsxs(T,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(E,{className:"text-sm font-medium",children:"평균 처리 시간"}),e.jsx(ks,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(N,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"2.5일"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"지난 달 대비 -0.5일"})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(g,{children:[e.jsx(T,{children:e.jsx(E,{children:"빠른 작업"})}),e.jsxs(N,{className:"grid gap-4",children:[e.jsxs(c,{className:"w-full justify-start",onClick:()=>k("upload"),children:[e.jsx(ze,{className:"w-4 h-4 mr-2"}),"새 계약서 업로드"]}),e.jsxs(c,{className:"w-full justify-start",variant:"outline",onClick:()=>k("templates"),children:[e.jsx(Ds,{className:"w-4 h-4 mr-2"}),"템플릿에서 생성"]}),e.jsxs(c,{className:"w-full justify-start",variant:"outline",onClick:()=>I(!0),children:[e.jsx(ws,{className:"w-4 h-4 mr-2"}),"문서 편집기 열기"]})]})]}),e.jsxs(g,{children:[e.jsx(T,{children:e.jsx(E,{children:"최근 활동"})}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(De,{className:"w-4 h-4 text-green-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"NDA 계약서 완료"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"2시간 전"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ve,{className:"w-4 h-4 text-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"서비스 계약서 서명 요청"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"5시간 전"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Oe,{className:"w-4 h-4 text-yellow-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"구매 계약서 열람"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"1일 전"})]})]})]})})]})]})]}),e.jsx(G,{value:"upload",className:"space-y-4",children:e.jsxs(g,{children:[e.jsxs(T,{children:[e.jsx(E,{children:"새 계약서 업로드"}),e.jsx(we,{children:"계약서를 업로드하고 블록체인에 등록합니다"})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"title",children:"계약서 제목 *"}),e.jsx(ne,{id:"title",placeholder:"예: 2024년 서비스 이용 계약서",value:t.title,onChange:l=>_({...t,title:l.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"description",children:"설명"}),e.jsx(He,{id:"description",placeholder:"계약서에 대한 간단한 설명을 입력하세요",value:t.description,onChange:l=>_({...t,description:l.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"file",children:"계약서 파일 *"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ne,{id:"file",type:"file",accept:".pdf,.doc,.docx",onChange:p,className:"flex-1"}),M&&e.jsxs(L,{variant:"outline",className:"gap-1",children:[e.jsx(Le,{className:"w-3 h-3"}),M.name]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{onClick:s,disabled:K||!M||!t.title,className:"flex-1",children:K?e.jsxs(e.Fragment,{children:[e.jsx(Fe,{className:"w-4 h-4 mr-2 animate-spin"}),"업로드 중..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ze,{className:"w-4 h-4 mr-2"}),"블록체인에 계약서 등록"]})}),e.jsxs(c,{variant:"outline",onClick:()=>I(!0),children:[e.jsx(ws,{className:"w-4 h-4 mr-2"}),"편집기로 작성"]})]}),e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(qe,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-blue-900",children:"블록체인 보안"}),e.jsx("p",{className:"text-blue-700",children:"업로드된 계약서는 SHA-256 해시로 변환되어 블록체인에 영구 저장됩니다."})]})]})})]})]})}),e.jsx(G,{value:"templates",className:"space-y-4",children:e.jsx(za,{})}),e.jsx(G,{value:"bulk-send",className:"space-y-4",children:e.jsx(Oa,{templates:[{id:"1",name:"표준 근로계약서",category:"인사/노무",fields:[{name:"employeeName",type:"text",label:"근로자 성명"},{name:"department",type:"text",label:"부서"},{name:"position",type:"text",label:"직위"},{name:"salary",type:"number",label:"급여"},{name:"startDate",type:"date",label:"계약 시작일"}]},{id:"2",name:"소프트웨어 개발 용역계약서",category:"IT/개발",fields:[{name:"projectName",type:"text",label:"프로젝트명"},{name:"scope",type:"textarea",label:"개발 범위"},{name:"amount",type:"number",label:"계약 금액"},{name:"deliveryDate",type:"date",label:"납품일"}]},{id:"3",name:"비밀유지계약서(NDA)",category:"법무/보안",fields:[{name:"partyA",type:"text",label:"공개자"},{name:"partyB",type:"text",label:"수령자"},{name:"confidentialInfo",type:"textarea",label:"비밀정보 내용"},{name:"duration",type:"text",label:"유효 기간"}]}]})}),e.jsx(G,{value:"stamps",className:"space-y-4",children:e.jsx(Pa,{})}),e.jsx(G,{value:"auth",className:"space-y-4",children:e.jsx(La,{})}),e.jsx(G,{value:"version",className:"space-y-4",children:e.jsx(qa,{})}),e.jsx(G,{value:"cloud",className:"space-y-4",children:e.jsx($a,{})}),e.jsx(G,{value:"mobile",className:"space-y-4",children:e.jsx(Ua,{})}),e.jsx(G,{value:"notifications",className:"space-y-4",children:e.jsx(Va,{})}),e.jsx(G,{value:"manage",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4",children:[x.filter(l=>l.status!=="completed").map(l=>e.jsxs(g,{children:[e.jsx(T,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(E,{className:"text-lg",children:l.title}),e.jsx(we,{children:l.description})]}),r(l.status)]})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"서명 진행률"}),e.jsxs("span",{className:"font-medium",children:[l.signers.filter(w=>w.signed).length," / ",l.signers.length]})]}),e.jsx(Ss,{value:v(l),className:"h-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"서명자 현황"}),l.signers.length===0?e.jsx("p",{className:"text-sm text-muted-foreground",children:"아직 서명자가 지정되지 않았습니다."}):e.jsx("div",{className:"space-y-1",children:l.signers.map((w,U)=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[w.signed?e.jsx(De,{className:"w-4 h-4 text-green-500"}):e.jsx(Fe,{className:"w-4 h-4 text-yellow-500"}),e.jsx("span",{children:w.name||w.email})]}),w.signed&&w.signedAt&&e.jsx("span",{className:"text-muted-foreground",children:new Date(w.signedAt).toLocaleDateString()})]},U))})]}),e.jsx(As,{}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(c,{size:"sm",variant:"outline",onClick:()=>{n(l),m(!0)},children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"서명 요청"]}),e.jsxs(c,{size:"sm",variant:"outline",onClick:()=>i(!0),children:[e.jsx(ts,{className:"w-4 h-4 mr-2"}),"추적"]}),e.jsxs(c,{size:"sm",variant:"outline",children:[e.jsx(Oe,{className:"w-4 h-4 mr-2"}),"미리보기"]}),l.status==="partially_signed"&&e.jsxs(c,{size:"sm",variant:"outline",children:[e.jsx(Ve,{className:"w-4 h-4 mr-2"}),"리마인더"]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.jsxs("p",{children:["파일: ",l.fileName]}),e.jsxs("p",{children:["해시: ",l.fileHash]}),e.jsxs("p",{children:["업로드: ",new Date(l.uploadedAt).toLocaleString()]})]})]})]},l.id)),x.filter(l=>l.status!=="completed").length===0&&e.jsx(g,{children:e.jsxs(N,{className:"text-center py-8",children:[e.jsx(Le,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"진행 중인 계약서가 없습니다."}),e.jsx(c,{variant:"outline",className:"mt-4",onClick:()=>k("upload"),children:"새 계약서 업로드"})]})})]})}),e.jsx(G,{value:"completed",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4",children:[x.filter(l=>l.status==="completed").map(l=>e.jsxs(g,{children:[e.jsx(T,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(E,{className:"text-lg",children:l.title}),e.jsx(we,{children:l.description})]}),r(l.status)]})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"서명 완료"}),e.jsx("div",{className:"space-y-1",children:l.signers.map((w,U)=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(De,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{children:w.name||w.email})]}),w.signedAt&&e.jsx("span",{className:"text-muted-foreground",children:new Date(w.signedAt).toLocaleString()})]},U))})]}),e.jsx(As,{}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(c,{size:"sm",children:[e.jsx(is,{className:"w-4 h-4 mr-2"}),"최종본 다운로드"]}),e.jsxs(c,{size:"sm",variant:"outline",children:[e.jsx(Oe,{className:"w-4 h-4 mr-2"}),"미리보기"]}),e.jsxs(c,{size:"sm",variant:"outline",children:[e.jsx(qe,{className:"w-4 h-4 mr-2"}),"블록체인 검증"]}),e.jsxs(c,{size:"sm",variant:"outline",onClick:()=>i(!0),children:[e.jsx(ts,{className:"w-4 h-4 mr-2"}),"기록 보기"]})]}),e.jsx("div",{className:"bg-green-50 p-3 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ws,{className:"w-5 h-5 text-green-600 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-green-900",children:"계약 완료"}),e.jsx("p",{className:"text-green-700",children:"모든 당사자가 서명을 완료했습니다."}),e.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["블록체인 TX: ",l.blockchainTxHash]})]})]})})]})]},l.id)),x.filter(l=>l.status==="completed").length===0&&e.jsx(g,{children:e.jsxs(N,{className:"text-center py-8",children:[e.jsx(De,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"완료된 계약서가 없습니다."})]})})]})}),e.jsx(G,{value:"archive",className:"space-y-4",children:e.jsxs(g,{children:[e.jsxs(T,{children:[e.jsx(E,{children:"계약서 보관함"}),e.jsx(we,{children:"만료되거나 취소된 계약서를 보관합니다"})]}),e.jsx(N,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ta,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"보관된 계약서가 없습니다."})]})})]})})]}),e.jsx(hs,{open:F,onOpenChange:m,children:e.jsxs(os,{className:"sm:max-w-[500px]",children:[e.jsxs(ms,{children:[e.jsx(xs,{children:"서명 요청"}),e.jsx(us,{children:"계약서에 서명할 상대방의 정보를 입력하세요."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"signerEmail",children:"서명자 이메일 *"}),e.jsx(ne,{id:"signerEmail",type:"email",placeholder:"signer@example.com",value:R.signerEmail,onChange:l=>O({...R,signerEmail:l.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"signerName",children:"서명자 이름"}),e.jsx(ne,{id:"signerName",placeholder:"홍길동",value:R.signerName,onChange:l=>O({...R,signerName:l.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"ccEmails",children:"참조자 이메일"}),e.jsx(ne,{id:"ccEmails",placeholder:"cc1@example.com, cc2@example.com",value:R.ccEmails,onChange:l=>O({...R,ccEmails:l.target.value})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"여러 명인 경우 쉼표로 구분하세요"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"message",children:"메시지 (선택)"}),e.jsx(He,{id:"message",placeholder:"계약서 검토 후 서명 부탁드립니다.",value:R.message,onChange:l=>O({...R,message:l.target.value})})]})]}),e.jsxs(js,{children:[e.jsx(c,{variant:"outline",onClick:()=>m(!1),children:"취소"}),e.jsxs(c,{onClick:a,children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"서명 요청 발송"]})]})]})})]})}export{Mt as default};
