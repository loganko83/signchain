import{j as e}from"./ui-vendor-DtKnxXw5.js";import{r as x}from"./react-vendor-Dzt9N-8P.js";import{b as A}from"./api-D30H7COj.js";import{N as M,B as V}from"./navigation-Dx1o0Ja4.js";import{c as D,u as I,B as y,C as r,a as l,S as w,d as o,e as h,I as L,A as k,h as T,F as R}from"./index-BDx6bSRW.js";import{B as c}from"./badge-B1fBHK3E.js";import{T as E,a as q,b as j,c as p}from"./tabs-B6lXYGVo.js";import{P as F}from"./progress-B4kceaig.js";import{B as K,g as U,a as _}from"./blockchain-hash-utils-JjUtqpJX.js";import{E as P}from"./external-link-CCe0NQHs.js";import{U as X}from"./users-NR0dtYHH.js";import{H as $}from"./index-DmtbdpjK.js";import{S as O}from"./search-D2N68a4V.js";import{C as u}from"./circle-check-big-BxzUcnFn.js";import{T as Q}from"./triangle-alert-DMKmK2iy.js";import{C}from"./clock-BGaxYKCJ.js";import"./chevron-right-BQhjzqxP.js";import"./check-B-y8kd2B.js";import"./scroll-area-CWy9i-qr.js";import"./popover-DpVQG62C.js";import"./separator-Dk3EMEYs.js";import"./mail-QjW_XfAn.js";import"./user-B2CVNPG5.js";import"./menu-Dj1NUcoa.js";import"./square-check-big-CByW3uzg.js";import"./user-check-BHkWZA_H.js";import"./code-BfWNHUXV.js";import"./utils-B2rm_Apj.js";import"./copy-abr6s6pk.js";import"./circle-alert-CRkskc5c.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],G=D("link",z);function Ce(){const{user:n}=I(),[d,S]=x.useState(""),[a,f]=x.useState(null),[g,N]=x.useState(!1),{data:m=[]}=A({queryKey:["/api/documents"],queryFn:async()=>{const s=await fetch(`/api/documents?userId=${n==null?void 0:n.id}`);if(!s.ok)throw new Error("문서를 가져올 수 없습니다");return s.json()},enabled:!!n}),t=m.filter(s=>s.blockchainTxHash),H=m.reduce((s,i)=>s+(i.status==="서명 완료"?1:0),0),v=t.length>0?Math.round(t.length/m.length*100):0,B=async()=>{if(d.trim()){N(!0);try{await new Promise(i=>setTimeout(i,2e3));const s={isValid:!0,transactionHash:d,blockNumber:Math.floor(Math.random()*1e6)+1234567,timestamp:new Date,documentTitle:"계약서_2025.pdf",signers:["alice@example.com","bob@example.com"],gasUsed:21e3,confirmations:127};f(s)}catch{f({isValid:!1,error:"검증 실패"})}finally{N(!1)}}},b=s=>{switch(s){case"서명 완료":return e.jsxs(c,{className:"bg-green-100 text-green-800",children:[e.jsx(u,{className:"w-3 h-3 mr-1"}),"완료"]});case"서명 대기":return e.jsxs(c,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:[e.jsx(C,{className:"w-3 h-3 mr-1"}),"대기"]});case"업로드됨":return e.jsx(c,{variant:"outline",className:"bg-blue-100 text-blue-800",children:"업로드됨"});default:return e.jsx(c,{variant:"outline",children:s})}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(M,{}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"블록체인 검증"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Xphere 블록체인에서 문서와 서명의 무결성을 검증하세요"})]}),e.jsx("div",{className:"mt-4 sm:mt-0",children:e.jsx(y,{variant:"outline",asChild:!0,children:e.jsxs("a",{href:"https://explorer.xphere.io",target:"_blank",rel:"noopener noreferrer",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"블록체인 탐색기"]})})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx(r,{children:e.jsxs(l,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"검증된 문서"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(w,{className:"w-6 h-6 text-green-500"})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(F,{value:v,className:"h-2"}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["무결성 점수: ",v,"%"]})]})]})}),e.jsx(r,{children:e.jsxs(l,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"완료된 서명"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:H})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(X,{className:"w-6 h-6 text-blue-500"})})]}),e.jsxs("div",{className:"mt-4 flex items-center",children:[e.jsx("span",{className:"text-green-500 text-sm font-medium",children:"100% 검증됨"}),e.jsx("span",{className:"text-gray-500 text-sm ml-2",children:"블록체인 기록"})]})]})}),e.jsx(r,{children:e.jsxs(l,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"블록체인 상태"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"활성"})]}),e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(G,{className:"w-6 h-6 text-purple-500"})})]}),e.jsxs("div",{className:"mt-4 flex items-center",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full mr-2"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Xphere 네트워크 연결됨"})]})]})})]}),e.jsxs(E,{defaultValue:"verify",className:"space-y-6",children:[e.jsxs(q,{className:"grid w-full grid-cols-3",children:[e.jsx(j,{value:"verify",children:"해시 검증"}),e.jsx(j,{value:"documents",children:"검증된 문서"}),e.jsx(j,{value:"audit",children:"감사 추적"})]}),e.jsx(p,{value:"verify",children:e.jsxs(r,{children:[e.jsx(o,{children:e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-5 w-5"}),"트랜잭션 해시 검증"]})}),e.jsxs(l,{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{placeholder:"트랜잭션 해시를 입력하세요 (예: 0x123abc...)",value:d,onChange:s=>S(s.target.value),className:"font-mono"}),e.jsxs(y,{onClick:B,disabled:g||!d.trim(),children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),g?"검증 중...":"검증"]})]}),a&&e.jsx("div",{className:"mt-6",children:a.isValid?e.jsxs(k,{className:"bg-green-50 border-green-200",children:[e.jsx(u,{className:"h-4 w-4 text-green-600"}),e.jsx(T,{className:"text-green-800",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-4 w-4"}),e.jsx("span",{className:"font-semibold",children:"검증 성공"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"문서명"}),e.jsx("p",{children:a.documentTitle})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"블록 번호"}),e.jsx("p",{children:a.blockNumber})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"타임스탬프"}),e.jsx("p",{children:a.timestamp.toLocaleString("ko-KR")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"확인 수"}),e.jsx("p",{children:a.confirmations})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"서명자"}),e.jsx("div",{className:"flex gap-2 mt-1",children:a.signers.map((s,i)=>e.jsx(c,{variant:"outline",className:"bg-green-50",children:s},i))})]})]})})]}):e.jsxs(k,{variant:"destructive",children:[e.jsx(Q,{className:"h-4 w-4"}),e.jsx(T,{children:a.error||"해시를 찾을 수 없거나 유효하지 않습니다."})]})})]})]})}),e.jsx(p,{value:"documents",children:e.jsxs(r,{children:[e.jsx(o,{children:e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-5 w-5"}),"검증된 문서 (",t.length,")"]})}),e.jsx(l,{children:t.length>0?e.jsx("div",{className:"space-y-4",children:t.map(s=>e.jsxs("div",{className:"border rounded-lg p-4 bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(u,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.createdAt?new Date(s.createdAt).toLocaleString("ko-KR"):""})]})]}),b(s.status)]}),e.jsx(K,{hashInfo:{transactionHash:s.blockchainTxHash||U(),blockNumber:_(),network:"xphere",timestamp:s.createdAt||new Date().toISOString(),confirmations:Math.floor(Math.random()*20)+5,status:"confirmed",gasUsed:"25000",gasFee:"0.0015",type:"document"},title:`${s.title} 블록체인 증빙`,compact:!0})]},s.id))}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(w,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"아직 블록체인에 검증된 문서가 없습니다."})]})})]})}),e.jsx(p,{value:"audit",children:e.jsxs(r,{children:[e.jsx(o,{children:e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5"}),"전체 감사 추적"]})}),e.jsx(l,{children:e.jsx("div",{className:"space-y-4",children:m.map(s=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-medium",children:s.title}),b(s.status)]}),e.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsxs("span",{children:["문서 업로드됨 - ",s.createdAt?new Date(s.createdAt).toLocaleString("ko-KR"):""]})]}),s.blockchainTxHash&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsxs("span",{children:["블록체인에 기록됨 - 해시: ",s.blockchainTxHash.slice(0,16),"..."]})]})]})]},s.id))})})]})})]})]})]})}export{Ce as default};
